{"version":3,"sources":["../src/plugin.ts","../src/__tests__/e2e/starter-plugin.ts","../src/services/pythonService.ts","../src/services/deploymentService.ts","../src/services/autoKnowledgeService.ts","../src/actions/analyzeMolecularData.ts","../src/actions/parseGaussianFile.ts","../src/actions/diagnostics.ts","../src/actions/autoKnowledgeAction.ts","../src/actions/generateVisualizationAction.ts","../src/actions/generateReportAction.ts","../src/index.ts"],"sourcesContent":["import type { Plugin } from '@elizaos/core';\nimport {\n  type Action,\n  type Content,\n  type GenerateTextParams,\n  type HandlerCallback,\n  type IAgentRuntime,\n  type Memory,\n  ModelType,\n  type Provider,\n  type ProviderResult,\n  Service,\n  type State,\n  logger,\n} from '@elizaos/core';\nimport { z } from 'zod';\nimport { StarterPluginTestSuite } from './tests';\n\n// Import Python service and actions\nimport { PythonService } from './services/pythonService';\nimport { DeploymentService } from './services/deploymentService';\nimport { AutoKnowledgeService } from './services/autoKnowledgeService';\nimport { analyzeMolecularDataAction } from './actions/analyzeMolecularData';\nimport { parseGaussianFileAction } from './actions/parseGaussianFile';\nimport { diagnosticsAction } from './actions/diagnostics';\nimport { autoKnowledgeAction } from './actions/autoKnowledgeAction';\nimport { generateVisualizationAction } from './actions/generateVisualizationAction';\nimport { generateReportAction } from './actions/generateReportAction';\n\n/**\n * Defines the configuration schema for the computational chemistry plugin\n */\nconst configSchema = z.object({\n  PYTHON_PATH: z\n    .string()\n    .optional()\n    .default('python3')\n    .transform((val) => {\n      if (!val) {\n        logger.info('Using default Python path: python3');\n      }\n      return val || 'python3';\n    }),\n  PYTHON_DEBUG: z\n    .string()\n    .optional()\n    .transform((val) => {\n      return val === 'true' ? 'true' : 'false';\n    }),\n  COMPCHEM_DATA_DIR: z\n    .string()\n    .optional()\n    .default('./data')\n    .transform((val) => {\n      return val || './data';\n    }),\n});\n\n/**\n * Example HelloWorld action\n * This demonstrates the simplest possible action structure\n */\n/**\n * Action representing a hello world message.\n * @typedef {Object} Action\n * @property {string} name - The name of the action.\n * @property {string[]} similes - An array of related actions.\n * @property {string} description - A brief description of the action.\n * @property {Function} validate - Asynchronous function to validate the action.\n * @property {Function} handler - Asynchronous function to handle the action and generate a response.\n * @property {Object[]} examples - An array of example inputs and expected outputs for the action.\n */\nconst helloWorldAction: Action = {\n  name: 'HELLO_WORLD',\n  similes: ['GREET', 'SAY_HELLO'],\n  description: 'Responds with a simple hello world message',\n\n  validate: async (\n    _runtime: IAgentRuntime,\n    _message: Memory,\n    _state: State | undefined\n  ): Promise<boolean> => {\n    // Always valid\n    return true;\n  },\n\n  handler: async (\n    _runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined,\n    _options: any,\n    callback?: HandlerCallback,\n    _responses?: Memory[]\n  ) => {\n    try {\n      logger.info('Handling HELLO_WORLD action');\n\n      // Simple response content\n      const responseContent: Content = {\n        text: 'hello world!',\n        actions: ['HELLO_WORLD'],\n        source: message.content.source,\n      };\n\n      // Call back with the hello world message if callback is provided\n      if (callback) {\n        await callback(responseContent);\n      }\n\n      return responseContent;\n    } catch (error) {\n      logger.error('Error in HELLO_WORLD action:', error);\n      throw error;\n    }\n  },\n\n  examples: [\n    [\n      {\n        name: '{{name1}}',\n        content: {\n          text: 'Can you say hello?',\n        },\n      },\n      {\n        name: '{{name2}}',\n        content: {\n          text: 'hello world!',\n          actions: ['HELLO_WORLD'],\n        },\n      },\n    ],\n  ],\n};\n\n/**\n * Example Hello World Provider\n * This demonstrates the simplest possible provider implementation\n */\nconst helloWorldProvider: Provider = {\n  name: 'HELLO_WORLD_PROVIDER',\n  description: 'A simple example provider',\n\n  get: async (\n    _runtime: IAgentRuntime,\n    _message: Memory,\n    _state: State | undefined\n  ): Promise<ProviderResult> => {\n    return {\n      text: 'I am a provider',\n      values: {},\n      data: {},\n    };\n  },\n};\n\nexport class CompchemService extends Service {\n  static serviceType = 'compchem-manager';\n  capabilityDescription =\n    'Computational chemistry management service that coordinates molecular analysis and Python integration.';\n  \n  constructor(runtime: IAgentRuntime) {\n    super(runtime);\n  }\n\n  static async start(runtime: IAgentRuntime) {\n    logger.info(`üß™ Starting computational chemistry service: ${new Date().toISOString()}`);\n    const service = new CompchemService(runtime);\n    \n    // Check if Python service is available\n    const pythonService = runtime.getService<PythonService>('python-execution');\n    if (pythonService) {\n      logger.info('‚úÖ Python integration available');\n      \n      // Check Python environment\n      try {\n        const pythonEnv = await pythonService.checkPythonEnvironment();\n        if (pythonEnv.pythonAvailable) {\n          logger.info(`üêç Python ${pythonEnv.pythonVersion} detected`);\n          logger.info(`üì¶ Available packages: ${pythonEnv.packagesAvailable.join(', ')}`);\n          if (pythonEnv.packagesMissing.length > 0) {\n            logger.warn(`‚ö†Ô∏è  Missing packages: ${pythonEnv.packagesMissing.join(', ')}`);\n          }\n        } else {\n          logger.warn('‚ö†Ô∏è  Python environment not available');\n        }\n      } catch (error) {\n        logger.warn('‚ö†Ô∏è  Could not check Python environment:', error);\n      }\n    } else {\n      logger.warn('‚ö†Ô∏è  Python service not available');\n    }\n    \n    return service;\n  }\n\n  static async stop(runtime: IAgentRuntime) {\n    logger.info('üß™ Stopping computational chemistry service');\n    const service = runtime.getService(CompchemService.serviceType);\n    if (!service) {\n      throw new Error('Computational chemistry service not found');\n    }\n    service.stop();\n  }\n\n  async stop() {\n    logger.info('üß™ Computational chemistry service stopped');\n  }\n}\n\nexport const myCompchemPlugin: Plugin = {\n  name: 'my-compchem-plugin-v2',\n  description: 'Advanced computational chemistry plugin for ElizaOS with Python integration and persistent knowledge graph storage',\n  config: {\n    PYTHON_PATH: process.env.PYTHON_PATH,\n    PYTHON_DEBUG: process.env.PYTHON_DEBUG,\n    COMPCHEM_DATA_DIR: process.env.COMPCHEM_DATA_DIR,\n  },\n  async init(config: Record<string, string>) {\n    logger.info('üß™ Initializing computational chemistry plugin v2');\n    try {\n      const validatedConfig = await configSchema.parseAsync(config);\n\n      // Set all environment variables at once\n      for (const [key, value] of Object.entries(validatedConfig)) {\n        if (value) process.env[key] = value;\n      }\n      \n      logger.info('‚úÖ Plugin configuration validated successfully');\n      logger.info(`üêç Python path: ${validatedConfig.PYTHON_PATH}`);\n      logger.info(`üìÅ Data directory: ${validatedConfig.COMPCHEM_DATA_DIR}`);\n      \n      // Auto-deploy Python files to agent directory\n      try {\n        await DeploymentService.deployPythonFiles();\n      } catch (deployError) {\n        logger.warn('‚ö†Ô∏è  Failed to auto-deploy Python files:', deployError);\n        logger.warn('You may need to manually copy Python files to the agent directory');\n      }\n      \n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        throw new Error(\n          `Invalid plugin configuration: ${error.errors.map((e) => e.message).join(', ')}`\n        );\n      }\n      throw error;\n    }\n  },\n  models: {\n    [ModelType.TEXT_SMALL]: async (\n      _runtime,\n      { prompt, stopSequences = [] }: GenerateTextParams\n    ) => {\n      return 'Never gonna give you up, never gonna let you down, never gonna run around and desert you...';\n    },\n    [ModelType.TEXT_LARGE]: async (\n      _runtime,\n      {\n        prompt,\n        stopSequences = [],\n        maxTokens = 8192,\n        temperature = 0.7,\n        frequencyPenalty = 0.7,\n        presencePenalty = 0.7,\n      }: GenerateTextParams\n    ) => {\n      return 'Never gonna make you cry, never gonna say goodbye, never gonna tell a lie and hurt you...';\n    },\n  },\n  routes: [\n    {\n      name: 'hello-world-route',\n      path: '/helloworld',\n      type: 'GET',\n      handler: async (_req: any, res: any) => {\n        // send a response\n        res.json({\n          message: 'Hello World!',\n        });\n      },\n    },\n    {\n      name: 'current-time-route',\n      path: '/api/time',\n      type: 'GET',\n      handler: async (_req: any, res: any) => {\n        // Return current time in various formats\n        const now = new Date();\n        res.json({\n          timestamp: now.toISOString(),\n          unix: Math.floor(now.getTime() / 1000),\n          formatted: now.toLocaleString(),\n          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n        });\n      },\n    },\n  ],\n  events: {\n    MESSAGE_RECEIVED: [\n      async (params) => {\n        logger.debug('MESSAGE_RECEIVED event received');\n        // print the keys\n        logger.debug(Object.keys(params));\n      },\n    ],\n    VOICE_MESSAGE_RECEIVED: [\n      async (params) => {\n        logger.debug('VOICE_MESSAGE_RECEIVED event received');\n        // print the keys\n        logger.debug(Object.keys(params));\n      },\n    ],\n    WORLD_CONNECTED: [\n      async (params) => {\n        logger.debug('WORLD_CONNECTED event received');\n        // print the keys\n        logger.debug(Object.keys(params));\n      },\n    ],\n    WORLD_JOINED: [\n      async (params) => {\n        logger.debug('WORLD_JOINED event received');\n        // print the keys\n        logger.debug(Object.keys(params));\n      },\n    ],\n  },\n  services: [PythonService, CompchemService, AutoKnowledgeService],\n  actions: [helloWorldAction, analyzeMolecularDataAction, parseGaussianFileAction, diagnosticsAction, autoKnowledgeAction, generateVisualizationAction, generateReportAction],\n  providers: [helloWorldProvider],\n  tests: [StarterPluginTestSuite],\n  // dependencies: ['@elizaos/plugin-knowledge'], <--- plugin dependecies go here (if requires another plugin)\n};\n\nexport default myCompchemPlugin;\n","import { type Content, type HandlerCallback } from '@elizaos/core';\n\n/**\n * E2E (End-to-End) Test Suite for ElizaOS Plugins\n * ================================================\n *\n * This file contains end-to-end tests that run within a real ElizaOS runtime environment.\n * Unlike unit tests that test individual components in isolation, e2e tests validate\n * the entire plugin behavior in a production-like environment.\n *\n * NOTE: The tests are properly structured and included in the plugin build.\n * If the test runner is not detecting these tests, it may be looking at the wrong\n * plugin name or there may be a test runner configuration issue. The tests are\n * exported correctly through src/tests.ts and included in the plugin's tests array.\n *\n * HOW E2E TESTS WORK:\n * -------------------\n * 1. Tests are executed by the ElizaOS test runner using `elizaos test e2e`\n * 2. Each test receives a real runtime instance with the plugin loaded\n * 3. Tests can interact with the runtime just like in production\n * 4. Tests throw errors to indicate failure (no assertion library needed)\n *\n * WRITING NEW E2E TESTS:\n * ----------------------\n * 1. Add a new test object to the `tests` array below\n * 2. Each test must have:\n *    - `name`: A unique identifier for the test\n *    - `fn`: An async function that receives the runtime and performs the test\n *\n * Example structure:\n * ```typescript\n * {\n *   name: 'my_new_test',\n *   fn: async (runtime) => {\n *     // Your test logic here\n *     if (someCondition !== expected) {\n *       throw new Error('Test failed: reason');\n *     }\n *   }\n * }\n * ```\n *\n * BEST PRACTICES:\n * ---------------\n * - Test real user scenarios, not implementation details\n * - Use descriptive test names that explain what's being tested\n * - Include clear error messages that help diagnose failures\n * - Test both success and failure paths\n * - Clean up any resources created during tests\n *\n * AVAILABLE RUNTIME METHODS:\n * --------------------------\n * - runtime.getService(type): Get a service instance\n * - runtime.character: Access character configuration\n * - runtime.models: Access AI models\n * - runtime.db: Access database methods\n * - runtime.actions: Access registered actions\n * - runtime.providers: Access registered providers\n *\n * For more details, see the ElizaOS documentation.\n */\n\n// Define a minimal TestSuite interface that matches what's needed\ninterface TestSuite {\n  name: string;\n  description?: string;\n  tests: Array<{\n    name: string;\n    fn: (runtime: any) => Promise<any>;\n  }>;\n}\n\n// Define minimal interfaces for the types we need\ntype UUID = `${string}-${string}-${string}-${string}-${string}`;\n\ninterface Memory {\n  entityId: UUID;\n  roomId: UUID;\n  content: {\n    text: string;\n    source: string;\n    actions?: string[];\n  };\n}\n\ninterface State {\n  values: Record<string, any>;\n  data: Record<string, any>;\n  text: string;\n}\n\nexport const StarterPluginTestSuite: TestSuite = {\n  name: 'plugin_starter_test_suite',\n  description: 'E2E tests for the starter plugin',\n\n  tests: [\n    /**\n     * Basic Plugin Verification Test\n     * ------------------------------\n     * This test verifies that the plugin is properly loaded and initialized\n     * within the runtime environment.\n     */\n    {\n      name: 'example_test',\n      fn: async (runtime) => {\n        // Test the character name\n        if (runtime.character.name !== 'Eliza') {\n          throw new Error(\n            `Expected character name to be \"Eliza\" but got \"${runtime.character.name}\"`\n          );\n        }\n        // Verify the plugin is loaded properly\n        const service = runtime.getService('starter');\n        if (!service) {\n          throw new Error('Starter service not found');\n        }\n      },\n    },\n\n    /**\n     * Action Registration Test\n     * ------------------------\n     * Verifies that custom actions are properly registered with the runtime.\n     * This is important to ensure actions are available for the agent to use.\n     */\n    {\n      name: 'should_have_hello_world_action',\n      fn: async (runtime) => {\n        // Access actions through runtime.actions instead of getPlugin\n        const actionExists = runtime.actions?.some((a) => a.name === 'HELLO_WORLD');\n        if (!actionExists) {\n          throw new Error('Hello world action not found in runtime actions');\n        }\n      },\n    },\n\n    /**\n     * Hello World Action Response Test\n     * ---------------------------------\n     * This test demonstrates a complete scenario where:\n     * 1. The agent is asked to say \"hello\"\n     * 2. The HELLO_WORLD action is triggered\n     * 3. The agent responds with text containing \"hello world\"\n     *\n     * This is a key pattern for testing agent behaviors - you simulate\n     * a user message and verify the agent's response.\n     */\n    {\n      name: 'hello_world_action_test',\n      fn: async (runtime) => {\n        // Create a test message asking the agent to say hello\n        const testMessage: Memory = {\n          entityId: '12345678-1234-1234-1234-123456789012' as UUID,\n          roomId: '12345678-1234-1234-1234-123456789012' as UUID,\n          content: {\n            text: 'Can you say hello?',\n            source: 'test',\n            actions: ['HELLO_WORLD'], // Specify which action we expect to trigger\n          },\n        };\n\n        // Create a test state (can include context if needed)\n        const testState: State = {\n          values: {},\n          data: {},\n          text: '',\n        };\n\n        let responseText = '';\n        let responseReceived = false;\n\n        // Find the hello world action in runtime.actions\n        const helloWorldAction = runtime.actions?.find((a) => a.name === 'HELLO_WORLD');\n        if (!helloWorldAction) {\n          throw new Error('Hello world action not found in runtime actions');\n        }\n\n        // Create a callback that captures the agent's response\n        // This simulates how the runtime would handle the action's response\n        const callback: HandlerCallback = async (response: Content) => {\n          responseReceived = true;\n          responseText = response.text || '';\n\n          // Verify the response includes the expected action\n          if (!response.actions?.includes('HELLO_WORLD')) {\n            throw new Error('Response did not include HELLO_WORLD action');\n          }\n\n          // Return Promise<Memory[]> as required by the HandlerCallback interface\n          return Promise.resolve([]);\n        };\n\n        // Execute the action - this simulates the runtime calling the action\n        await helloWorldAction.handler(runtime, testMessage, testState, {}, callback);\n\n        // Verify we received a response\n        if (!responseReceived) {\n          throw new Error('Hello world action did not produce a response');\n        }\n\n        // Verify the response contains \"hello world\" (case-insensitive)\n        if (!responseText.toLowerCase().includes('hello world')) {\n          throw new Error(`Expected response to contain \"hello world\" but got: \"${responseText}\"`);\n        }\n\n        // Success! The agent responded with \"hello world\" as expected\n      },\n    },\n\n    /**\n     * Provider Functionality Test\n     * ---------------------------\n     * Tests that providers can supply data to the agent when needed.\n     * Providers are used to fetch external data or compute values.\n     */\n    {\n      name: 'hello_world_provider_test',\n      fn: async (runtime) => {\n        // Create a test message\n        const testMessage: Memory = {\n          entityId: '12345678-1234-1234-1234-123456789012' as UUID,\n          roomId: '12345678-1234-1234-1234-123456789012' as UUID,\n          content: {\n            text: 'What can you provide?',\n            source: 'test',\n          },\n        };\n\n        // Create a test state\n        const testState: State = {\n          values: {},\n          data: {},\n          text: '',\n        };\n\n        // Find the hello world provider in runtime.providers\n        const helloWorldProvider = runtime.providers?.find(\n          (p) => p.name === 'HELLO_WORLD_PROVIDER'\n        );\n        if (!helloWorldProvider) {\n          throw new Error('Hello world provider not found in runtime providers');\n        }\n\n        // Test the provider\n        const result = await helloWorldProvider.get(runtime, testMessage, testState);\n\n        if (result.text !== 'I am a provider') {\n          throw new Error(`Expected provider to return \"I am a provider\", got \"${result.text}\"`);\n        }\n      },\n    },\n\n    /**\n     * Service Lifecycle Test\n     * ----------------------\n     * Verifies that services can be started, accessed, and stopped properly.\n     * Services run background tasks or manage long-lived resources.\n     */\n    {\n      name: 'starter_service_test',\n      fn: async (runtime) => {\n        // Get the service from the runtime\n        const service = runtime.getService('starter');\n        if (!service) {\n          throw new Error('Starter service not found');\n        }\n\n        // Check service capability description\n        if (\n          service.capabilityDescription !==\n          'This is a starter service which is attached to the agent through the starter plugin.'\n        ) {\n          throw new Error('Incorrect service capability description');\n        }\n\n        // Test service stop method\n        await service.stop();\n      },\n    },\n\n    /**\n     * ADD YOUR CUSTOM TESTS HERE\n     * --------------------------\n     * To add a new test:\n     *\n     * 1. Copy this template:\n     * ```typescript\n     * {\n     *   name: 'your_test_name',\n     *   fn: async (runtime) => {\n     *     // Setup: Create any test data needed\n     *\n     *     // Action: Perform the operation you want to test\n     *\n     *     // Assert: Check the results\n     *     if (result !== expected) {\n     *       throw new Error(`Expected ${expected} but got ${result}`);\n     *     }\n     *   }\n     * }\n     * ```\n     *\n     * 2. Common test patterns:\n     *    - Test action responses to specific prompts\n     *    - Verify provider data under different conditions\n     *    - Check service behavior during lifecycle events\n     *    - Validate plugin configuration handling\n     *    - Test error cases and edge conditions\n     *\n     * 3. Tips:\n     *    - Use meaningful variable names\n     *    - Include helpful error messages\n     *    - Test one thing per test\n     *    - Consider both success and failure scenarios\n     */\n  ],\n};\n\n// Export a default instance of the test suite for the E2E test runner\nexport default StarterPluginTestSuite;\n","import {\n  type IAgentRuntime,\n  Service,\n  logger,\n} from '@elizaos/core';\nimport { execFile, spawn } from 'child_process';\nimport { promisify } from 'util';\nimport * as path from 'path';\nimport { promises as fs } from 'fs';\nimport { fileURLToPath } from 'url';\nimport { DeploymentService } from './deploymentService';\n\n// ES modules equivalent of __dirname\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst execFileAsync = promisify(execFile);\n\nexport class PythonService extends Service {\n  static serviceType = 'python-execution';\n  \n  capabilityDescription = 'Enables the agent to execute Python scripts for molecular analysis and computational chemistry calculations';\n\n  constructor(runtime: IAgentRuntime) {\n    super(runtime);\n  }\n\n  static async start(runtime: IAgentRuntime): Promise<PythonService> {\n    const service = new PythonService(runtime);\n    \n    // Initialize service with runtime settings\n    const debugMode = runtime.getSetting('PYTHON_DEBUG') === 'true';\n    const pythonPath = runtime.getSetting('PYTHON_PATH') || 'python3';\n    \n    if (debugMode) {\n      logger.info('üêç Python Service initialized with debug mode');\n      logger.info(`   Python path: ${pythonPath}`);\n    }\n    \n    return service;\n  }\n\n  async stop(): Promise<void> {\n    logger.info('üêç Python Service stopped');\n  }\n\n  /**\n   * Execute a Python script using execFile (for simple scripts that return JSON)\n   */\n  async executePythonScript(\n    scriptPath: string,\n    args: string[] = [],\n    options: { timeout?: number } = {}\n  ): Promise<string> {\n    try {\n      const pythonInterpreter = this.runtime.getSetting('PYTHON_PATH') || 'python3';\n      const absoluteScriptPath = path.resolve(scriptPath);\n      \n      // Verify script exists\n      await fs.access(absoluteScriptPath);\n      \n      const { stdout } = await execFileAsync(pythonInterpreter, [absoluteScriptPath, ...args], {\n        timeout: options.timeout || 30000, // 30 second default timeout\n        encoding: 'utf8'\n      });\n      \n      return stdout;\n    } catch (error) {\n      logger.error('Python script execution failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Execute Python script with streaming output (for long-running processes)\n   */\n  async executePythonScriptStreaming(\n    scriptPath: string,\n    args: string[] = [],\n    onData?: (data: string) => void,\n    onError?: (data: string) => void\n  ): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const pythonInterpreter = this.runtime.getSetting('PYTHON_PATH') || 'python3';\n      const absoluteScriptPath = path.resolve(scriptPath);\n      \n      const pythonProcess = spawn(pythonInterpreter, [absoluteScriptPath, ...args], {\n        stdio: ['pipe', 'pipe', 'pipe']\n      });\n      \n      let stdout = '';\n      let stderr = '';\n      \n      pythonProcess.stdout.on('data', (data) => {\n        const output = data.toString();\n        stdout += output;\n        if (onData) onData(output);\n      });\n      \n      pythonProcess.stderr.on('data', (data) => {\n        const error = data.toString();\n        stderr += error;\n        if (onError) onError(error);\n      });\n      \n      pythonProcess.on('close', (code) => {\n        if (code === 0) {\n          resolve(stdout.trim());\n        } else {\n          logger.error(`‚ùå Python process failed with code ${code}: ${stderr}`);\n          reject(new Error(`Python script failed with code ${code}: ${stderr}`));\n        }\n      });\n      \n      pythonProcess.on('error', (error) => {\n        logger.error(`‚ùå Failed to start Python process: ${error}`);\n        reject(error);\n      });\n    });\n  }\n\n  /**\n   * Analyze molecular data using Python\n   */\n  async analyzeMolecularData(\n    molecularData: any,\n    analysisType: 'molecular' | 'energy' | 'visualization' = 'molecular'\n  ): Promise<any> {\n    try {\n      // Ensure Python files are deployed before attempting to use them\n      await this.ensurePythonFilesDeployed();\n      \n      // Try to find the Python script in various locations\n      const possibleScriptPaths = [\n        path.join(process.cwd(), 'py', 'molecular_analyzer.py'),\n        path.join(__dirname, '..', '..', 'py', 'molecular_analyzer.py'),\n        path.join(__dirname, '..', '..', '..', 'py', 'molecular_analyzer.py'),\n        path.join(process.cwd(), 'plugins', 'my-compchem-plugin-v2', 'py', 'molecular_analyzer.py'),\n        './py/molecular_analyzer.py'\n      ];\n\n      let scriptPath: string | null = null;\n      for (const possiblePath of possibleScriptPaths) {\n        try {\n          await fs.access(possiblePath);\n          scriptPath = possiblePath;\n          break;\n        } catch {\n          // Script doesn't exist at this path, continue\n        }\n      }\n\n      if (!scriptPath) {\n        throw new Error(`Python script not found. Tried paths: ${possibleScriptPaths.join(', ')}`);\n      }\n\n      const dataJson = JSON.stringify(molecularData);\n      \n      const result = await this.executePythonScript(scriptPath, [\n        dataJson,\n        '--analysis_type', analysisType\n      ]);\n      \n      return JSON.parse(result);\n    } catch (error) {\n      logger.error('Molecular data analysis failed:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Generate visualization charts using Python matplotlib\n   */\n  async generateVisualization(\n    chartType: string,\n    plotData: any,\n    outputDir: string\n  ): Promise<any> {\n    try {\n      // Ensure Python files are deployed before attempting to use them\n      await this.ensurePythonFilesDeployed();\n      \n      // Try to find the Python plotting script\n      const possibleScriptPaths = [\n        path.join(process.cwd(), 'py', 'plot_gaussian_analysis.py'),\n        path.join(__dirname, '..', '..', 'py', 'plot_gaussian_analysis.py'),\n        path.join(__dirname, '..', '..', '..', 'py', 'plot_gaussian_analysis.py'),\n        path.join(process.cwd(), 'plugins', 'my-compchem-plugin-v2', 'py', 'plot_gaussian_analysis.py'),\n        './py/plot_gaussian_analysis.py'\n      ];\n\n      let scriptPath: string | null = null;\n      for (const possiblePath of possibleScriptPaths) {\n        try {\n          await fs.access(possiblePath);\n          scriptPath = possiblePath;\n          break;\n        } catch {\n          // Script doesn't exist at this path, continue\n        }\n      }\n\n      if (!scriptPath) {\n        throw new Error(`Python plotting script not found. Tried paths: ${possibleScriptPaths.join(', ')}`);\n      }\n\n      // Generate output filename based on chart type\n      const outputFileName = `${chartType}_chart.png`;\n      const outputPath = path.join(outputDir, outputFileName);\n\n      const dataJson = JSON.stringify(plotData);\n      const args = [chartType, dataJson, outputPath];\n        \n      const result = await this.executePythonScript(scriptPath, args);\n      \n      // Count data points for reporting\n      let dataPoints = 0;\n      if (plotData.energyData) {\n        const energyCount = Object.values(plotData.energyData).reduce((sum: number, energies: any) => \n          sum + (Array.isArray(energies) ? energies.length : 0), 0) as number;\n        dataPoints += energyCount;\n      }\n      \n      return { \n        success: true, \n        chartPath: outputPath,\n        dataPoints,\n        description: `${chartType} chart generated with ${dataPoints} data points`,\n        message: result \n      };\n    } catch (error) {\n      logger.error('Visualization generation failed:', error);\n      return { \n        error: error instanceof Error ? error.message : 'Unknown error', \n        success: false \n      };\n    }\n  }\n\n  /**\n   * Parse Gaussian log files using cclib\n   */\n  async parseGaussianFile(\n    filePath: string,\n    metadata: any = {},\n    outputFormat: 'json' | 'turtle' = 'json'\n  ): Promise<any> {\n    try {\n      // Ensure Python files are deployed before attempting to use them\n      await this.ensurePythonFilesDeployed();\n      // Try to find the Python script in various locations\n      const possibleScriptPaths = [\n        path.join(process.cwd(), 'py', 'parse_gaussian_cclib.py'),\n        path.join(__dirname, '..', '..', 'py', 'parse_gaussian_cclib.py'),\n        path.join(__dirname, '..', '..', '..', 'py', 'parse_gaussian_cclib.py'),\n        path.join(process.cwd(), 'plugins', 'my-compchem-plugin-v2', 'py', 'parse_gaussian_cclib.py'),\n        './py/parse_gaussian_cclib.py'\n      ];\n\n      let scriptPath: string | null = null;\n      for (const possiblePath of possibleScriptPaths) {\n        try {\n          await fs.access(possiblePath);\n          scriptPath = possiblePath;\n          break;\n        } catch {\n          // Script doesn't exist at this path, continue\n        }\n      }\n\n      if (!scriptPath) {\n        throw new Error(`Python script not found. Tried paths: ${possibleScriptPaths.join(', ')}`);\n      }\n\n      const metadataJson = JSON.stringify(metadata);\n      const args = [filePath, metadataJson, '--format', outputFormat];\n      \n      const result = await this.executePythonScript(scriptPath, args);\n      \n      if (outputFormat === 'json') {\n        return JSON.parse(result);\n      } else {\n        return { rdf: result, success: true };\n      }\n    } catch (error) {\n      logger.error('Gaussian file parsing failed:', error);\n      return { error: error instanceof Error ? error.message : 'Unknown error', success: false };\n    }\n  }\n\n  /**\n   * Generate analysis plots using matplotlib\n   */\n  async generateAnalysisPlots(\n    chartType: string,\n    data: any,\n    outputPath?: string\n  ): Promise<any> {\n    try {\n      // Ensure Python files are deployed before attempting to use them\n      await this.ensurePythonFilesDeployed();\n      \n      // Try to find the Python script in various locations\n      const possibleScriptPaths = [\n        path.join(process.cwd(), 'py', 'plot_gaussian_analysis.py'),\n        path.join(__dirname, '..', '..', 'py', 'plot_gaussian_analysis.py'),\n        path.join(__dirname, '..', '..', '..', 'py', 'plot_gaussian_analysis.py'),\n        path.join(process.cwd(), 'plugins', 'my-compchem-plugin-v2', 'py', 'plot_gaussian_analysis.py'),\n        './py/plot_gaussian_analysis.py'\n      ];\n\n      let scriptPath: string | null = null;\n      for (const possiblePath of possibleScriptPaths) {\n        try {\n          await fs.access(possiblePath);\n          scriptPath = possiblePath;\n          break;\n        } catch {\n          // Script doesn't exist at this path, continue\n        }\n      }\n\n      if (!scriptPath) {\n        throw new Error(`Python script not found. Tried paths: ${possibleScriptPaths.join(', ')}`);\n      }\n\n      const dataJson = JSON.stringify(data);\n      const args = outputPath \n        ? [chartType, dataJson, outputPath]\n        : [chartType, dataJson];\n        \n      const result = await this.executePythonScript(scriptPath, args);\n      \n      if (outputPath) {\n        return { success: true, outputPath, message: result };\n      } else {\n        return { success: true, output: result };\n      }\n    } catch (error) {\n      logger.error('Analysis plot generation failed:', error);\n      return { error: error instanceof Error ? error.message : 'Unknown error', success: false };\n    }\n  }\n\n  /**\n   * Generate comprehensive report using Python\n   */\n  async generateComprehensiveReport(\n    reportData: any,\n    outputDir: string\n  ): Promise<any> {\n    try {\n      // Ensure Python files are deployed before attempting to use them\n      await this.ensurePythonFilesDeployed();\n      \n      // Try to find the Python comprehensive report script\n      const possibleScriptPaths = [\n        path.join(process.cwd(), 'py', 'generate_comprehensive_report.py'),\n        path.join(__dirname, '..', '..', 'py', 'generate_comprehensive_report.py'),\n        path.join(__dirname, '..', '..', '..', 'py', 'generate_comprehensive_report.py'),\n        path.join(process.cwd(), 'plugins', 'my-compchem-plugin-v2', 'py', 'generate_comprehensive_report.py'),\n        './py/generate_comprehensive_report.py'\n      ];\n\n      let scriptPath: string | null = null;\n      for (const possiblePath of possibleScriptPaths) {\n        try {\n          await fs.access(possiblePath);\n          scriptPath = possiblePath;\n          break;\n        } catch {\n          // Script doesn't exist at this path, continue\n        }\n      }\n\n      if (!scriptPath) {\n        throw new Error(`Python comprehensive report script not found. Tried paths: ${possibleScriptPaths.join(', ')}`);\n      }\n\n      const dataJson = JSON.stringify(reportData);\n      const args = [dataJson, outputDir];\n        \n      const result = await this.executePythonScript(scriptPath, args);\n      \n      return JSON.parse(result);\n    } catch (error) {\n      logger.error('Comprehensive report generation failed:', error);\n      return { \n        error: error instanceof Error ? error.message : 'Unknown error', \n        success: false \n      };\n    }\n  }\n\n  /**\n   * Check if Python and required packages are available\n   */\n  async checkPythonEnvironment(): Promise<{\n    pythonAvailable: boolean;\n    pythonVersion?: string;\n    packagesAvailable: string[];\n    packagesMissing: string[];\n    cclibAvailable: boolean;\n  }> {\n    try {\n      const pythonInterpreter = this.runtime.getSetting('PYTHON_PATH') || 'python3';\n      \n      // Check Python version\n      const { stdout: versionOutput } = await execFileAsync(pythonInterpreter, ['--version']);\n      const pythonVersion = versionOutput.trim();\n      \n      // Check required packages including cclib\n      const requiredPackages = ['numpy', 'matplotlib', 'scipy', 'pandas', 'seaborn', 'cclib'];\n      const packagesAvailable: string[] = [];\n      const packagesMissing: string[] = [];\n      \n      for (const pkg of requiredPackages) {\n        try {\n          await execFileAsync(pythonInterpreter, ['-c', `import ${pkg}; print(${pkg}.__version__)`]);\n          packagesAvailable.push(pkg);\n        } catch {\n          packagesMissing.push(pkg);\n        }\n      }\n      \n      const cclibAvailable = packagesAvailable.includes('cclib');\n      \n      return {\n        pythonAvailable: true,\n        pythonVersion,\n        packagesAvailable,\n        packagesMissing,\n        cclibAvailable\n      };\n    } catch (error) {\n      logger.warn('Python environment check failed:', error);\n      return {\n        pythonAvailable: false,\n        packagesAvailable: [],\n        packagesMissing: ['numpy', 'matplotlib', 'scipy', 'pandas', 'seaborn', 'cclib'],\n        cclibAvailable: false\n      };\n    }\n  }\n\n  /**\n   * Ensure Python files are deployed and available\n   */\n  private async ensurePythonFilesDeployed(): Promise<void> {\n    const deployment = DeploymentService.checkDeployment();\n    if (!deployment.deployed) {\n      logger.info(`üöÄ Auto-deploying missing Python files: ${deployment.missing.join(', ')}`);\n      try {\n        await DeploymentService.deployPythonFiles();\n      } catch (error) {\n        logger.warn('‚ö†Ô∏è  Auto-deployment failed:', error);\n        throw new Error(`Required Python files missing: ${deployment.missing.join(', ')}`);\n      }\n    }\n  }\n} ","import * as fs from 'fs';\nimport * as path from 'path';\nimport { logger } from '@elizaos/core';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nexport class DeploymentService {\n  /**\n   * Deploy Python files from plugin to ElizaOS agent directory\n   */\n  static async deployPythonFiles(): Promise<void> {\n    try {\n      logger.info('üöÄ Deploying Python files to agent directory...');\n      \n      const agentDir = process.cwd(); // ElizaOS working directory\n      let pluginPyDir = path.join(__dirname, '..', '..', 'py');\n      const targetPyDir = path.join(agentDir, 'py');\n      \n      logger.info(`üîç Initial plugin py directory: ${pluginPyDir}`);\n      \n      // Alternative path resolution if the standard method fails\n      if (!fs.existsSync(pluginPyDir)) {\n        const alternativePaths = [\n          // Try relative to current working directory\n          path.join(process.cwd(), '..', 'plugin-my-compchem-plugin-v2', 'py'),\n          // Try relative to agent directory\n          path.join(agentDir, '..', 'plugin-my-compchem-plugin-v2', 'py'),\n          // Try if we're in a plugins directory structure\n          path.join(agentDir, 'plugins', 'plugin-my-compchem-plugin-v2', 'py'),\n          // Try absolute path construction from __dirname\n          path.join(path.dirname(path.dirname(path.dirname(__dirname))), 'plugin-my-compchem-plugin-v2', 'py'),\n        ];\n        \n        for (const altPath of alternativePaths) {\n          if (fs.existsSync(altPath)) {\n            logger.info(`üîÑ Using alternative path: ${altPath}`);\n            pluginPyDir = altPath;\n            break;\n          }\n        }\n      }\n      \n      logger.info(`üìÅ Source directory: ${pluginPyDir}`);\n      logger.info(`üìÅ Target directory: ${targetPyDir}`);\n      \n      // Ensure target directory exists\n      if (!fs.existsSync(targetPyDir)) {\n        fs.mkdirSync(targetPyDir, { recursive: true });\n        logger.info(`üìÅ Created directory: ${targetPyDir}`);\n      }\n      \n      // Files to deploy\n      const filesToDeploy = [\n        'parse_gaussian_cclib.py',\n        'plot_gaussian_analysis.py',\n        'generate_comprehensive_report.py',\n        'molecular_analyzer.py',\n        '__init__.py'\n      ];\n      \n      let deployedCount = 0;\n      let skippedCount = 0;\n      let missingCount = 0;\n      \n      for (const fileName of filesToDeploy) {\n        const sourcePath = path.join(pluginPyDir, fileName);\n        const targetPath = path.join(targetPyDir, fileName);\n        \n        if (fs.existsSync(sourcePath)) {\n          // Check if file needs updating\n          let shouldCopy = true;\n          if (fs.existsSync(targetPath)) {\n            const sourceStats = fs.statSync(sourcePath);\n            const targetStats = fs.statSync(targetPath);\n            shouldCopy = sourceStats.mtime > targetStats.mtime;\n          }\n          \n          if (shouldCopy) {\n            fs.copyFileSync(sourcePath, targetPath);\n            logger.info(`‚úÖ Deployed: ${fileName}`);\n            deployedCount++;\n          } else {\n            logger.info(`‚è≠Ô∏è  Skipped (up to date): ${fileName}`);\n            skippedCount++;\n          }\n        } else {\n          logger.warn(`‚ö†Ô∏è  Source file not found: ${sourcePath}`);\n          missingCount++;\n        }\n      }\n      \n      logger.info(`üìä Deployment Summary: ${deployedCount} deployed, ${skippedCount} skipped, ${missingCount} missing`);\n      \n      // Deploy data files if they don't exist\n      await this.deployDataFiles();\n      \n      logger.info('üéâ Python files deployment complete!');\n      \n    } catch (error) {\n      logger.error('‚ùå Failed to deploy Python files:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Deploy example data files\n   */\n  static async deployDataFiles(): Promise<void> {\n    const agentDir = process.cwd();\n    let pluginDataDir = path.join(__dirname, '..', '..', 'data', 'examples');\n    const targetDataDir = path.join(agentDir, 'data', 'examples');\n    \n    // Alternative path resolution if the standard method fails\n    if (!fs.existsSync(pluginDataDir)) {\n      const alternativePaths = [\n        // Try relative to current working directory\n        path.join(process.cwd(), '..', 'plugin-my-compchem-plugin-v2', 'data', 'examples'),\n        // Try relative to agent directory\n        path.join(agentDir, '..', 'plugin-my-compchem-plugin-v2', 'data', 'examples'),\n        // Try if we're in a plugins directory structure\n        path.join(agentDir, 'plugins', 'plugin-my-compchem-plugin-v2', 'data', 'examples'),\n        // Try absolute path construction from __dirname\n        path.join(path.dirname(path.dirname(path.dirname(__dirname))), 'plugin-my-compchem-plugin-v2', 'data', 'examples'),\n      ];\n      \n      for (const altPath of alternativePaths) {\n        if (fs.existsSync(altPath)) {\n          logger.info(`üîÑ Using alternative data path: ${altPath}`);\n          pluginDataDir = altPath;\n          break;\n        }\n      }\n    }\n    \n    // Ensure target directory exists\n    if (!fs.existsSync(targetDataDir)) {\n      fs.mkdirSync(targetDataDir, { recursive: true });\n      logger.info(`üìÅ Created data directory: ${targetDataDir}`);\n    }\n    \n    // Check for example data files in plugin directory\n    if (fs.existsSync(pluginDataDir)) {\n      const dataFiles = fs.readdirSync(pluginDataDir).filter(f => f.endsWith('.log'));\n      \n      for (const fileName of dataFiles) {\n        const sourcePath = path.join(pluginDataDir, fileName);\n        const targetPath = path.join(targetDataDir, fileName);\n        \n        if (!fs.existsSync(targetPath)) {\n          fs.copyFileSync(sourcePath, targetPath);\n          logger.info(`‚úÖ Deployed data file: ${fileName}`);\n        }\n      }\n    }\n  }\n  \n  /**\n   * Check if Python files are properly deployed\n   */\n  static checkDeployment(): { deployed: boolean; missing: string[] } {\n    const agentDir = process.cwd();\n    const targetPyDir = path.join(agentDir, 'py');\n    \n    const requiredFiles = [\n      'parse_gaussian_cclib.py',\n      'plot_gaussian_analysis.py',\n      'generate_comprehensive_report.py',\n      'molecular_analyzer.py'\n    ];\n    \n    const missing: string[] = [];\n    \n    for (const fileName of requiredFiles) {\n      const filePath = path.join(targetPyDir, fileName);\n      if (!fs.existsSync(filePath)) {\n        missing.push(fileName);\n      }\n    }\n    \n    return {\n      deployed: missing.length === 0,\n      missing\n    };\n  }\n} ","import { IAgentRuntime, Service, logger } from \"@elizaos/core\";\nimport { promises as fs } from \"fs\";\nimport { watch } from \"fs\";\nimport * as path from \"path\";\nimport { PythonService } from \"./pythonService\";\n\nexport class AutoKnowledgeService extends Service {\n    static serviceType = 'auto-knowledge';\n    capabilityDescription = \"Automatically monitors data/examples directory and builds knowledge graph from Gaussian files\";\n    \n    private knowledgeGraphPath: string;\n    private watchedDirectory: string;\n    private processedFiles: Set<string> = new Set();\n    private isInitialized = false;\n    private fileWatcher: any = null;\n\n    constructor(runtime: IAgentRuntime) {\n        super(runtime);\n        this.knowledgeGraphPath = \"\";\n        this.watchedDirectory = \"\";\n    }\n\n    static async start(runtime: IAgentRuntime): Promise<AutoKnowledgeService> {\n        const service = new AutoKnowledgeService(runtime);\n        await service.initialize();\n        logger.info(\"üß† Auto Knowledge Service started - watching data/examples/ for Gaussian files\");\n        return service;\n    }\n\n    async initialize(): Promise<void> {\n        if (this.isInitialized) return;\n\n        // Set up paths (simpler than v2 approach)\n        this.knowledgeGraphPath = path.join(process.cwd(), \"data\", \"auto-knowledge-graph.ttl\");\n        this.watchedDirectory = path.join(process.cwd(), \"data\", \"examples\");\n\n        try {\n            // Ensure directories exist\n            await fs.mkdir(path.dirname(this.knowledgeGraphPath), { recursive: true });\n            await fs.mkdir(this.watchedDirectory, { recursive: true });\n            \n            // Load or create knowledge graph\n            await this.loadOrCreateKnowledgeGraph();\n            \n            // Process existing files\n            await this.scanExistingFiles();\n            \n            // Start watching for new files (like v1)\n            this.startFileWatcher();\n            \n            this.isInitialized = true;\n            logger.info(`üìä Auto knowledge graph: ${this.knowledgeGraphPath}`);\n            logger.info(`üëÄ Watching directory: ${this.watchedDirectory}`);\n        } catch (error) {\n            logger.error(\"‚ùå Failed to initialize Auto Knowledge Service:\", error);\n        }\n    }\n\n    static async stop(runtime: IAgentRuntime): Promise<void> {\n        const service = runtime.getService('auto-knowledge') as AutoKnowledgeService;\n        if (service) {\n            service.stopWatching();\n        }\n        logger.info('üß† Auto Knowledge Service stopped');\n    }\n\n    async stop(): Promise<void> {\n        this.stopWatching();\n    }\n\n    private stopWatching(): void {\n        if (this.fileWatcher) {\n            this.fileWatcher.close();\n            this.fileWatcher = null;\n        }\n    }\n\n    private async loadOrCreateKnowledgeGraph(): Promise<void> {\n        try {\n            const stats = await fs.stat(this.knowledgeGraphPath);\n            if (stats.isFile()) {\n                logger.info(\"üìñ Loading existing auto knowledge graph...\");\n                const content = await fs.readFile(this.knowledgeGraphPath, 'utf-8');\n                \n                // Extract processed files from comments\n                const fileMatches = content.match(/# File: (.+\\.log)/g);\n                if (fileMatches) {\n                    for (const match of fileMatches) {\n                        const filename = match.replace('# File: ', '');\n                        this.processedFiles.add(filename);\n                    }\n                }\n                logger.info(`üìä Found ${this.processedFiles.size} previously processed files`);\n            }\n        } catch (error) {\n            // Create new knowledge graph\n            logger.info(\"üÜï Creating new auto knowledge graph...\");\n            await this.createInitialKnowledgeGraph();\n        }\n    }\n\n    private async createInitialKnowledgeGraph(): Promise<void> {\n        const initialContent = `# Auto Knowledge Graph - ElizaOS Plugin v2\n# Created: ${new Date().toISOString()}\n# Files are automatically processed when added to data/examples/\n\n@prefix ex: <https://example.org/auto#> .\n@prefix ontocompchem: <http://www.theworldavatar.com/ontology/ontocompchem/> .\n@prefix cheminf: <http://semanticscience.org/resource/> .\n\n`;\n        await fs.writeFile(this.knowledgeGraphPath, initialContent, 'utf-8');\n        logger.info(\"‚úÖ Auto knowledge graph created\");\n    }\n\n    // Automatic file monitoring (like v1)\n    private async scanExistingFiles(): Promise<void> {\n        try {\n            const files = await fs.readdir(this.watchedDirectory);\n            const gaussianFiles = files.filter(file => \n                file.toLowerCase().endsWith('.log') || file.toLowerCase().endsWith('.out')\n            );\n\n            logger.info(`üîç Found ${gaussianFiles.length} existing Gaussian files`);\n\n            for (const file of gaussianFiles) {\n                const filePath = path.join(this.watchedDirectory, file);\n                if (!this.processedFiles.has(file)) {\n                    await this.processFileAutomatically(filePath);\n                }\n            }\n        } catch (error) {\n            logger.warn(\"‚ö†Ô∏è  Could not scan existing files:\", error.message);\n        }\n    }\n\n    private startFileWatcher(): void {\n        try {\n            this.fileWatcher = watch(this.watchedDirectory, { recursive: false }, async (eventType, filename) => {\n                if (!filename) return;\n                \n                // Only process Gaussian files\n                if (!filename.toLowerCase().endsWith('.log') && !filename.toLowerCase().endsWith('.out')) {\n                    return;\n                }\n\n                const filePath = path.join(this.watchedDirectory, filename);\n\n                if (eventType === 'rename' || eventType === 'change') {\n                    try {\n                        // Check if file exists and is accessible\n                        await fs.access(filePath);\n                        \n                        // Skip if already processed\n                        if (this.processedFiles.has(filename)) {\n                            return;\n                        }\n\n                        logger.info(`üÜï New Gaussian file detected: ${filename}`);\n                        await this.processFileAutomatically(filePath);\n                    } catch (error) {\n                        // File was deleted or inaccessible\n                        logger.debug(`File no longer accessible: ${filename}`);\n                    }\n                }\n            });\n            \n            logger.info(\"üëÄ File watcher started\");\n        } catch (error) {\n            logger.warn(\"‚ö†Ô∏è  Could not start file watcher:\", error.message);\n        }\n    }\n\n    private async processFileAutomatically(filePath: string): Promise<void> {\n        const filename = path.basename(filePath);\n        \n        try {\n            // Get Python service\n            const pythonService = this.runtime.getService<PythonService>('python-execution');\n            if (!pythonService) {\n                logger.warn(\"‚ö†Ô∏è  Python service not available, skipping file processing\");\n                return;\n            }\n\n            logger.info(`‚öôÔ∏è  Auto-processing: ${filename}`);\n\n            const metadata = {\n                filename,\n                timestamp: new Date().toISOString(),\n                source: \"auto-monitor\",\n                parser: \"cclib\"\n            };\n\n            // Parse file to RDF\n            logger.info(`üîç Calling Python service to parse ${filename}...`);\n            const rdfResult = await pythonService.parseGaussianFile(filePath, metadata, 'turtle');\n            \n            // Add detailed logging to see what we got back\n            logger.info(`üìù Python service returned:`, {\n                type: typeof rdfResult,\n                isString: typeof rdfResult === 'string',\n                hasError: rdfResult && typeof rdfResult === 'object' && 'error' in rdfResult,\n                length: typeof rdfResult === 'string' ? rdfResult.length : 'N/A',\n                preview: typeof rdfResult === 'string' ? rdfResult.substring(0, 100) + '...' : rdfResult\n            });\n            \n            // Handle both string and object results from Python service\n            let rdfContent: string | null = null;\n            let success = false;\n\n            if (typeof rdfResult === 'string') {\n                // Direct string result\n                rdfContent = rdfResult;\n                success = true;\n            } else if (rdfResult && typeof rdfResult === 'object') {\n                if (rdfResult.error) {\n                    logger.error(`‚ùå Python parsing error for ${filename}: ${rdfResult.error}`);\n                } else if (rdfResult.rdf && typeof rdfResult.rdf === 'string') {\n                    // Object with rdf property (turtle format)\n                    rdfContent = rdfResult.rdf;\n                    success = rdfResult.success !== false;\n                } else {\n                    logger.error(`‚ùå Unexpected object format for ${filename}:`, rdfResult);\n                }\n            } else {\n                logger.error(`‚ùå No result returned from Python service for ${filename}`);\n            }\n\n            if (success && rdfContent && rdfContent.trim().length > 0) {\n                // Add to knowledge graph\n                const header = `\\n# File: ${filename} (auto-processed ${new Date().toISOString()})\\n`;\n                const contentToAppend = header + rdfContent + '\\n';\n                \n                await fs.appendFile(this.knowledgeGraphPath, contentToAppend, 'utf-8');\n                \n                // Mark as processed\n                this.processedFiles.add(filename);\n                \n                const tripleCount = (rdfContent.match(/\\./g) || []).length;\n                logger.info(`‚úÖ Auto-added ${tripleCount} triples from ${filename}`);\n            } else {\n                logger.error(`‚ùå Could not parse ${filename}: Invalid or empty RDF content`);\n            }\n        } catch (error) {\n            logger.error(`‚ùå Error auto-processing ${filename}:`, {\n                message: error.message,\n                stack: error.stack,\n                name: error.name,\n                fullError: error\n            });\n        }\n    }\n\n    // Simple query method\n    async getStats(): Promise<any> {\n        try {\n            const content = await fs.readFile(this.knowledgeGraphPath, 'utf-8');\n            \n            return {\n                totalFiles: this.processedFiles.size,\n                filesList: Array.from(this.processedFiles),\n                molecules: (content.match(/ontocompchem:QuantumCalculation/g) || []).length,\n                scfEnergies: (content.match(/ontocompchem:SCFEnergy/g) || []).length,\n                atoms: (content.match(/cheminf:Atom/g) || []).length,\n                lastUpdate: new Date().toISOString(),\n                knowledgeGraphPath: this.knowledgeGraphPath,\n                watchedDirectory: this.watchedDirectory\n            };\n        } catch (error) {\n            return { error: error.message };\n        }\n    }\n\n    async searchKnowledgeGraph(query: string): Promise<any> {\n        try {\n            const content = await fs.readFile(this.knowledgeGraphPath, 'utf-8');\n            const lines = content.split('\\n');\n            \n            const results = lines\n                .filter(line => line.toLowerCase().includes(query.toLowerCase()))\n                .slice(0, 10);\n            \n            return {\n                query,\n                matches: results.length,\n                results\n            };\n        } catch (error) {\n            return { error: error.message };\n        }\n    }\n\n    async getEnergies(): Promise<any> {\n        try {\n            const content = await fs.readFile(this.knowledgeGraphPath, 'utf-8');\n            \n            // Parse the RDF content to extract energy values\n            const energiesByFile: { [key: string]: any[] } = {};\n            let currentFile = 'unknown';\n            \n            const lines = content.split('\\n');\n            \n            for (const line of lines) {\n                // Track which file we're processing\n                if (line.includes('# File:')) {\n                    const match = line.match(/# File: (.+?) \\(/);\n                    if (match) {\n                        currentFile = match[1];\n                        if (!energiesByFile[currentFile]) {\n                            energiesByFile[currentFile] = [];\n                        }\n                    }\n                }\n                \n                // Extract SCF energies\n                if (line.includes('ontocompchem:hasValue') || line.includes('ontocompchem:hasValueEV')) {\n                    const valueMatch = line.match(/ontocompchem:hasValue\\s+([+-]?\\d+\\.?\\d*)/);\n                    const evMatch = line.match(/ontocompchem:hasValueEV\\s+([+-]?\\d+\\.?\\d*)/);\n                    \n                    if (valueMatch) {\n                        const energy = parseFloat(valueMatch[1]);\n                        energiesByFile[currentFile] = energiesByFile[currentFile] || [];\n                        \n                        // Find existing energy entry or create new one\n                        let energyEntry = energiesByFile[currentFile].find(e => Math.abs(e.hartree - energy) < 0.000001);\n                        if (!energyEntry) {\n                            energyEntry = { \n                                hartree: energy,\n                                eV: energy * 27.211 // Convert hartree to eV\n                            };\n                            energiesByFile[currentFile].push(energyEntry);\n                        }\n                    }\n                    \n                    if (evMatch) {\n                        const energyEv = parseFloat(evMatch[1]);\n                        energiesByFile[currentFile] = energiesByFile[currentFile] || [];\n                        \n                        // Find existing energy entry or create new one\n                        let energyEntry = energiesByFile[currentFile].find(e => Math.abs(e.eV - energyEv) < 0.001);\n                        if (!energyEntry) {\n                            energyEntry = {\n                                eV: energyEv,\n                                hartree: energyEv / 27.211 // Convert eV to hartree\n                            };\n                            energiesByFile[currentFile].push(energyEntry);\n                        } else {\n                            energyEntry.eV = energyEv; // Update with precise eV value\n                        }\n                    }\n                }\n            }\n            \n            return {\n                energiesByFile,\n                totalFiles: Object.keys(energiesByFile).length,\n                totalEnergies: Object.values(energiesByFile).reduce((sum, energies) => sum + energies.length, 0)\n            };\n        } catch (error) {\n            return { error: error.message };\n        }\n    }\n\n    async getMolecularData(): Promise<any> {\n        try {\n            const content = await fs.readFile(this.knowledgeGraphPath, 'utf-8');\n            \n            const moleculesByFile: { [key: string]: any } = {};\n            let currentFile = 'unknown';\n            \n            const lines = content.split('\\n');\n            \n            for (const line of lines) {\n                // Track which file we're processing  \n                if (line.includes('# File:')) {\n                    const match = line.match(/# File: (.+?) \\(/);\n                    if (match) {\n                        currentFile = match[1];\n                        if (!moleculesByFile[currentFile]) {\n                            moleculesByFile[currentFile] = {};\n                        }\n                    }\n                }\n                \n                // Extract molecular properties\n                if (line.includes('ontocompchem:hasNAtoms')) {\n                    const match = line.match(/ontocompchem:hasNAtoms\\s+(\\d+)/);\n                    if (match) {\n                        moleculesByFile[currentFile].nAtoms = parseInt(match[1]);\n                    }\n                }\n                \n                if (line.includes('ontocompchem:hasMolecularFormula')) {\n                    const match = line.match(/ontocompchem:hasMolecularFormula\\s+\"([^\"]+)\"/);\n                    if (match) {\n                        moleculesByFile[currentFile].formula = match[1];\n                    }\n                }\n                \n                if (line.includes('ontocompchem:hasCharge')) {\n                    const match = line.match(/ontocompchem:hasCharge\\s+([+-]?\\d+)/);\n                    if (match) {\n                        moleculesByFile[currentFile].charge = parseInt(match[1]);\n                    }\n                }\n                \n                if (line.includes('ontocompchem:hasMultiplicity')) {\n                    const match = line.match(/ontocompchem:hasMultiplicity\\s+(\\d+)/);\n                    if (match) {\n                        moleculesByFile[currentFile].multiplicity = parseInt(match[1]);\n                    }\n                }\n            }\n            \n            return {\n                moleculesByFile,\n                totalFiles: Object.keys(moleculesByFile).length\n            };\n        } catch (error) {\n            return { error: error.message };\n        }\n    }\n\n    isFileProcessed(filename: string): boolean {\n        return this.processedFiles.has(filename);\n    }\n} ","import type {\n  Action,\n  Content,\n  HandlerCallback,\n  IAgentRuntime,\n  Memory,\n  State,\n} from '@elizaos/core';\nimport { logger } from '@elizaos/core';\nimport { PythonService } from '../services/pythonService';\n\n/**\n * Action for analyzing molecular data using Python computational chemistry tools\n */\nexport const analyzeMolecularDataAction: Action = {\n  name: 'ANALYZE_MOLECULAR_DATA',\n  similes: ['ANALYZE_MOLECULE', 'MOLECULAR_ANALYSIS', 'COMPUTE_PROPERTIES'],\n  description: 'Analyzes molecular data and computes chemical properties using Python tools',\n\n  validate: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined\n  ): Promise<boolean> => {\n    // Check if this looks like a molecular analysis request\n    const text = message.content.text?.toLowerCase() || '';\n    \n    const molecularKeywords = [\n      'analyze molecule', 'molecular analysis', 'compute properties',\n      'molecular weight', 'stability', 'energy', 'chemical properties',\n      'molecular structure', 'atoms', 'bonds', 'homo lumo'\n    ];\n    \n    return molecularKeywords.some(keyword => text.includes(keyword));\n  },\n\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined,\n    _options: any,\n    callback?: HandlerCallback,\n    _responses?: Memory[]\n  ) => {\n    try {\n      logger.info('üß™ Analyzing molecular data...');\n\n      // Get Python service\n      const pythonService = runtime.getService<PythonService>('python-execution');\n      if (!pythonService) {\n        throw new Error('Python service not available');\n      }\n\n      // Check Python environment\n      const pythonEnv = await pythonService.checkPythonEnvironment();\n      if (!pythonEnv.pythonAvailable) {\n        const errorContent: Content = {\n          text: '‚ùå Python environment is not available. Please ensure Python 3 and required packages (numpy, matplotlib, scipy) are installed.',\n          actions: ['ANALYZE_MOLECULAR_DATA'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      // Extract molecular data from message or use example data\n      const molecularData = extractMolecularDataFromMessage(message) || {\n        formula: 'C6H6',\n        atoms: [\n          { id: 1, element: 'C', x: 0, y: 0, z: 0 },\n          { id: 2, element: 'C', x: 1.4, y: 0, z: 0 },\n          { id: 3, element: 'C', x: 2.1, y: 1.2, z: 0 },\n          { id: 4, element: 'C', x: 1.4, y: 2.4, z: 0 },\n          { id: 5, element: 'C', x: 0, y: 2.4, z: 0 },\n          { id: 6, element: 'C', x: -0.7, y: 1.2, z: 0 },\n          { id: 7, element: 'H', x: -0.5, y: -0.9, z: 0 },\n          { id: 8, element: 'H', x: 1.9, y: -0.9, z: 0 },\n          { id: 9, element: 'H', x: 3.2, y: 1.2, z: 0 },\n          { id: 10, element: 'H', x: 1.9, y: 3.3, z: 0 },\n          { id: 11, element: 'H', x: -0.5, y: 3.3, z: 0 },\n          { id: 12, element: 'H', x: -1.8, y: 1.2, z: 0 }\n        ],\n        bonds: [\n          { from: 1, to: 2 }, { from: 2, to: 3 }, { from: 3, to: 4 },\n          { from: 4, to: 5 }, { from: 5, to: 6 }, { from: 6, to: 1 },\n          { from: 1, to: 7 }, { from: 2, to: 8 }, { from: 3, to: 9 },\n          { from: 4, to: 10 }, { from: 5, to: 11 }, { from: 6, to: 12 }\n        ],\n        scf_energy: -231.5,\n        homo_lumo_gap: 5.2,\n        timestamp: new Date().toISOString()\n      };\n\n      // Perform molecular analysis\n      const analysisResult = await pythonService.analyzeMolecularData(molecularData, 'molecular');\n      \n      if (!analysisResult.success) {\n        throw new Error(analysisResult.error || 'Analysis failed');\n      }\n\n      // Perform energy analysis if energy data is available\n      let energyAnalysis = null;\n      if (molecularData.scf_energy || molecularData.homo_lumo_gap) {\n        energyAnalysis = await pythonService.analyzeMolecularData(molecularData, 'energy');\n      }\n\n      // Format the response\n      let responseText = `üß™ **Molecular Analysis Results**\\n\\n`;\n      responseText += `**Formula:** ${analysisResult.formula}\\n`;\n      responseText += `**Atom Count:** ${analysisResult.atom_count}\\n`;\n      responseText += `**Bond Count:** ${analysisResult.bond_count}\\n`;\n      responseText += `**Molecular Weight:** ${analysisResult.molecular_weight} g/mol\\n\\n`;\n\n      responseText += `**Computed Properties:**\\n`;\n      responseText += `‚Ä¢ Density Estimate: ${analysisResult.properties.density_estimate} g/cm¬≥\\n`;\n      responseText += `‚Ä¢ Complexity Score: ${analysisResult.properties.complexity_score}/100\\n`;\n      responseText += `‚Ä¢ Stability: ${analysisResult.properties.stability_estimate}\\n`;\n\n      if (energyAnalysis && energyAnalysis.success) {\n        responseText += `\\n**Energy Analysis:**\\n`;\n        if (energyAnalysis.scf_energy) {\n          responseText += `‚Ä¢ SCF Energy: ${energyAnalysis.scf_energy} hartree\\n`;\n          responseText += `‚Ä¢ Energy Classification: ${energyAnalysis.energy_classification}\\n`;\n        }\n        if (energyAnalysis.homo_lumo_gap) {\n          responseText += `‚Ä¢ HOMO-LUMO Gap: ${energyAnalysis.homo_lumo_gap} eV\\n`;\n          responseText += `‚Ä¢ Conductivity Prediction: ${energyAnalysis.conductivity_prediction}\\n`;\n        }\n      }\n\n      if (pythonEnv.packagesMissing.length > 0) {\n        responseText += `\\n**Note:** Some advanced features require additional Python packages: ${pythonEnv.packagesMissing.join(', ')}`;\n      }\n\n      const responseContent: Content = {\n        text: responseText,\n        actions: ['ANALYZE_MOLECULAR_DATA'],\n        source: message.content.source,\n      };\n\n      if (callback) await callback(responseContent);\n      return responseContent;\n\n    } catch (error) {\n      logger.error('Error in molecular data analysis:', error);\n      \n      const errorContent: Content = {\n        text: `‚ùå Failed to analyze molecular data: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        actions: ['ANALYZE_MOLECULAR_DATA'],\n        source: message.content.source,\n      };\n      \n      if (callback) await callback(errorContent);\n      return errorContent;\n    }\n  },\n\n  examples: [\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Can you analyze this molecular structure and compute its properties?',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üß™ **Molecular Analysis Results**\\n\\n**Formula:** C6H6\\n**Atom Count:** 12\\n**Bond Count:** 12\\n**Molecular Weight:** 78.11 g/mol\\n\\n**Computed Properties:**\\n‚Ä¢ Density Estimate: 7.81 g/cm¬≥\\n‚Ä¢ Complexity Score: 24/100\\n‚Ä¢ Stability: stable',\n          actions: ['ANALYZE_MOLECULAR_DATA'],\n        },\n      },\n    ],\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'What are the chemical properties of benzene?',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üß™ **Molecular Analysis Results**\\n\\n**Formula:** C6H6\\n**Atom Count:** 12\\n**Bond Count:** 12\\n**Molecular Weight:** 78.11 g/mol\\n\\n**Computed Properties:**\\n‚Ä¢ Density Estimate: 7.81 g/cm¬≥\\n‚Ä¢ Complexity Score: 24/100\\n‚Ä¢ Stability: stable\\n\\n**Energy Analysis:**\\n‚Ä¢ SCF Energy: -231.5 hartree\\n‚Ä¢ Energy Classification: unstable\\n‚Ä¢ HOMO-LUMO Gap: 5.2 eV\\n‚Ä¢ Conductivity Prediction: insulator',\n          actions: ['ANALYZE_MOLECULAR_DATA'],\n        },\n      },\n    ],\n  ],\n};\n\n/**\n * Extract molecular data from the message content\n */\nfunction extractMolecularDataFromMessage(message: Memory): any | null {\n  const text = message.content.text;\n  if (!text) return null;\n\n  // Try to extract JSON molecular data from the message\n  try {\n    const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n    if (jsonMatch) {\n      return JSON.parse(jsonMatch[0]);\n    }\n  } catch (error) {\n    // If JSON parsing fails, continue with other extraction methods\n  }\n\n  // Try to extract simple molecular formula\n  const formulaMatch = text.match(/([A-Z][a-z]?\\d*)+/);\n  if (formulaMatch) {\n    return {\n      formula: formulaMatch[0],\n      timestamp: new Date().toISOString()\n    };\n  }\n\n  return null;\n} ","import type {\n  Action,\n  Content,\n  HandlerCallback,\n  IAgentRuntime,\n  Memory,\n  State,\n} from '@elizaos/core';\nimport { logger } from '@elizaos/core';\nimport { PythonService } from '../services/pythonService';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport { fileURLToPath } from 'url';\n\n// ES modules equivalent of __dirname\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n/**\n * Action for parsing Gaussian log files using cclib\n */\nexport const parseGaussianFileAction: Action = {\n  name: 'PARSE_GAUSSIAN_FILE',\n  similes: ['PARSE_GAUSSIAN', 'ANALYZE_GAUSSIAN_LOG', 'READ_GAUSSIAN_FILE'],\n  description: 'Parses Gaussian computational chemistry log files using cclib to extract molecular properties and energies',\n\n  validate: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined\n  ): Promise<boolean> => {\n    // Check if this looks like a Gaussian file parsing request\n    const text = message.content.text?.toLowerCase() || '';\n    \n    const gaussianKeywords = [\n      'parse gaussian', 'gaussian log', 'gaussian file', '.log', '.out',\n      'scf energy', 'computational chemistry', 'quantum chemistry',\n      'parse log file', 'gaussian output', 'cclib', 'analyze calculation'\n    ];\n    \n    return gaussianKeywords.some(keyword => text.includes(keyword));\n  },\n\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined,\n    _options: any,\n    callback?: HandlerCallback,\n    _responses?: Memory[]\n  ) => {\n    try {\n      logger.info('üß¨ Parsing Gaussian file...');\n\n      // Get Python service\n      const pythonService = runtime.getService<PythonService>('python-execution');\n      if (!pythonService) {\n        throw new Error('Python service not available');\n      }\n\n      // Check Python environment\n      const pythonEnv = await pythonService.checkPythonEnvironment();\n      if (!pythonEnv.pythonAvailable) {\n        const errorContent: Content = {\n          text: '‚ùå Python environment is not available. Please install Python 3 and required packages.',\n          actions: ['PARSE_GAUSSIAN_FILE'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      if (!pythonEnv.cclibAvailable) {\n        const errorContent: Content = {\n          text: '‚ùå cclib is required for Gaussian file parsing. Please install it with: `pip install cclib`',\n          actions: ['PARSE_GAUSSIAN_FILE'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      // Extract file path from message or use example files\n      logger.info(`üîç Attempting to extract file path from message: \"${message.content.text}\"`);\n      const extractedPath = extractFilePathFromMessage(message);\n      logger.info(`üìù Extracted path result: ${extractedPath}`);\n      \n      let filePath = extractedPath;\n      if (!filePath) {\n        logger.info('üîç No file path extracted from message, looking for example files...');\n        filePath = findExampleLogFile();\n        logger.info(`üìÅ Example file search result: ${filePath}`);\n      }\n      \n      if (!filePath) {\n        const currentDir = process.cwd();\n        logger.error(`‚ùå No file found. CWD: ${currentDir}, __dirname: ${__dirname}`);\n        \n        // Let's check what's actually in the directories\n        const testDir = path.join(currentDir, 'data', 'examples');\n        try {\n          const files = require('fs').readdirSync(testDir);\n          logger.info(`üìÇ Files in ${testDir}: ${files.join(', ')}`);\n        } catch (error) {\n          logger.error(`‚ùå Cannot read directory ${testDir}: ${error.message}`);\n        }\n        \n        const errorContent: Content = {\n          text: `‚ùå No Gaussian log file specified. Please provide a file path or add log files to the data/examples/ directory.\\n\\nüîç **Current working directory:** ${currentDir}\\n\\nüìÅ **Looking for files in:**\\n‚Ä¢ ${path.join(currentDir, 'data', 'examples')}\\n‚Ä¢ ./data/examples/\\n‚Ä¢ Plugin directory data/examples/\\n\\nüí° **Example usage:** \"Parse the lactone.log file\" or \"Analyze TolueneEnergy.log\"`,\n          actions: ['PARSE_GAUSSIAN_FILE'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      // Parse the Gaussian file\n      const metadata = {\n        user_request: message.content.text,\n        timestamp: new Date().toISOString(),\n        source: 'eliza_agent'\n      };\n\n      // Parse the Gaussian file\n      const parseResult = await pythonService.parseGaussianFile(filePath, metadata, 'json');\n      \n      if (parseResult.error) {\n        throw new Error(parseResult.error);\n      }\n\n      // Format the response\n      let responseText = `üß¨ **Gaussian File Analysis Complete**\\n\\n`;\n      responseText += `**File:** ${path.basename(filePath)}\\n`;\n      \n      if (parseResult.metadata) {\n        responseText += `**Parser:** cclib v${parseResult.metadata.cclib_version}\\n`;\n        responseText += `**Parsed:** ${new Date(parseResult.metadata.parsed_at).toLocaleString()}\\n\\n`;\n      }\n\n      // Basic molecular information\n      if (parseResult.molecular_formula) {\n        responseText += `**Molecular Formula:** ${parseResult.molecular_formula}\\n`;\n      }\n      if (parseResult.natom) {\n        responseText += `**Number of Atoms:** ${parseResult.natom}\\n`;\n      }\n      if (parseResult.charge !== undefined) {\n        responseText += `**Charge:** ${parseResult.charge}\\n`;\n      }\n      if (parseResult.mult) {\n        responseText += `**Multiplicity:** ${parseResult.mult}\\n`;\n      }\n\n      // Energy information\n      if (parseResult.scfenergies && parseResult.scfenergies.length > 0) {\n        responseText += `\\n**Energies:**\\n`;\n        const finalEnergy = parseResult.scfenergies[parseResult.scfenergies.length - 1];\n        const finalEnergyHartree = finalEnergy / 27.211;\n        responseText += `‚Ä¢ Final SCF Energy: ${finalEnergy.toFixed(6)} eV (${finalEnergyHartree.toFixed(8)} hartree)\\n`;\n        \n        if (parseResult.scfenergies.length > 1) {\n          responseText += `‚Ä¢ Total SCF Cycles: ${parseResult.scfenergies.length}\\n`;\n        }\n      }\n\n      // HOMO-LUMO gap\n      if (parseResult.homo_lumo_gaps && parseResult.homo_lumo_gaps.length > 0) {\n        const gap = parseResult.homo_lumo_gaps[0];\n        responseText += `‚Ä¢ HOMO-LUMO Gap: ${gap.gap_ev.toFixed(3)} eV\\n`;\n        responseText += `‚Ä¢ HOMO Energy: ${gap.homo_energy_ev.toFixed(3)} eV\\n`;\n        responseText += `‚Ä¢ LUMO Energy: ${gap.lumo_energy_ev.toFixed(3)} eV\\n`;\n      }\n\n      // Vibrational frequencies\n      if (parseResult.vibfreqs && parseResult.vibfreqs.length > 0) {\n        responseText += `\\n**Vibrational Analysis:**\\n`;\n        responseText += `‚Ä¢ Number of Frequencies: ${parseResult.vibfreqs.length}\\n`;\n        \n        // Show first few frequencies\n        const freqsToShow = parseResult.vibfreqs.slice(0, 5);\n        responseText += `‚Ä¢ Frequencies (cm‚Åª¬π): ${freqsToShow.map((f: number) => f.toFixed(1)).join(', ')}`;\n        if (parseResult.vibfreqs.length > 5) {\n          responseText += ` ... (${parseResult.vibfreqs.length - 5} more)`;\n        }\n        responseText += `\\n`;\n      }\n\n      // Thermochemistry if available\n      if (parseResult.enthalpy || parseResult.entropy || parseResult.freeenergy) {\n        responseText += `\\n**Thermochemistry:**\\n`;\n        if (parseResult.enthalpy) {\n          responseText += `‚Ä¢ Enthalpy: ${parseResult.enthalpy.toFixed(6)} hartree\\n`;\n        }\n        if (parseResult.entropy) {\n          responseText += `‚Ä¢ Entropy: ${parseResult.entropy.toFixed(6)} cal/(mol¬∑K)\\n`;\n        }\n        if (parseResult.freeenergy) {\n          responseText += `‚Ä¢ Free Energy: ${parseResult.freeenergy.toFixed(6)} hartree\\n`;\n        }\n        if (parseResult.zpve) {\n          responseText += `‚Ä¢ Zero-Point Vibrational Energy: ${parseResult.zpve.toFixed(6)} hartree\\n`;\n        }\n      }\n\n      // Geometry information\n      if (parseResult.final_geometry) {\n        responseText += `\\n**Final Geometry:** ${parseResult.final_geometry.length} atoms with optimized coordinates\\n`;\n      }\n\n      // Data summary\n      const availableProperties = Object.keys(parseResult).filter(key => \n        !['metadata', 'error'].includes(key) && parseResult[key] != null\n      );\n      responseText += `\\n**Available Data:** ${availableProperties.length} properties extracted\\n`;\n      responseText += `Properties: ${availableProperties.slice(0, 8).join(', ')}`;\n      if (availableProperties.length > 8) {\n        responseText += ` ... (${availableProperties.length - 8} more)`;\n      }\n\n      // Auto knowledge graph info\n      responseText += `\\n\\nüß† **Auto Knowledge Graph:** Files in \\`data/examples/\\` are automatically processed into a persistent knowledge base`;\n      responseText += `\\nüí° *Try: \"Show knowledge stats\" to see the auto-built knowledge base*`;\n\n      const responseContent: Content = {\n        text: responseText,\n        actions: ['PARSE_GAUSSIAN_FILE'],\n        source: message.content.source,\n      };\n\n      if (callback) await callback(responseContent);\n      return responseContent;\n\n    } catch (error) {\n      logger.error('Error in Gaussian file parsing:', error);\n      \n      const errorContent: Content = {\n        text: `‚ùå Failed to parse Gaussian file: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        actions: ['PARSE_GAUSSIAN_FILE'],\n        source: message.content.source,\n      };\n      \n      if (callback) await callback(errorContent);\n      return errorContent;\n    }\n  },\n\n  examples: [\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Can you parse the lactone.log Gaussian file?',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üß¨ **Gaussian File Analysis Complete**\\n\\n**File:** lactone.log\\n**Parser:** cclib v1.8.1\\n\\n**Molecular Formula:** C3H4O2\\n**Number of Atoms:** 9\\n**Charge:** 0\\n**Multiplicity:** 1\\n\\n**Energies:**\\n‚Ä¢ Final SCF Energy: -6202.856269 eV (-227.856269 hartree)\\n‚Ä¢ HOMO-LUMO Gap: 8.245 eV\\n\\n**Available Data:** 15 properties extracted',\n          actions: ['PARSE_GAUSSIAN_FILE'],\n        },\n      },\n    ],\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Analyze the TolueneEnergy.log computational chemistry file',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üß¨ **Gaussian File Analysis Complete**\\n\\n**File:** TolueneEnergy.log\\n**Parser:** cclib v1.8.1\\n\\n**Molecular Formula:** C7H8\\n**Number of Atoms:** 15\\n**Charge:** 0\\n**Multiplicity:** 1\\n\\n**Energies:**\\n‚Ä¢ Final SCF Energy: -7384.636042 eV (-271.636042 hartree)\\n‚Ä¢ Total SCF Cycles: 5\\n\\n**Available Data:** 12 properties extracted',\n          actions: ['PARSE_GAUSSIAN_FILE'],\n        },\n      },\n    ],\n  ],\n};\n\n/**\n * Extract file path from the message content\n */\nfunction extractFilePathFromMessage(message: Memory): string | null {\n  const text = message.content.text;\n  logger.info(`üîç extractFilePathFromMessage: text = \"${text}\"`);\n  if (!text) return null;\n\n  // Look for file path patterns\n  const filePatterns = [\n    /(?:file:|path:)?\\s*([^\\s]+\\.(?:log|out))/gi,\n    /([^\\s]*lactone\\.log)/gi,\n    /([^\\s]*TolueneEnergy\\.log)/gi,\n    /([^\\s]*\\.(?:log|out))/gi\n  ];\n\n  for (let i = 0; i < filePatterns.length; i++) {\n    const pattern = filePatterns[i];\n    const match = text.match(pattern);\n    logger.info(`üîç Pattern ${i + 1}: ${pattern} -> match: ${match ? match[0] : 'none'}`);\n    \n    if (match) {\n      let filePath = match[1] || match[0];\n      \n      // Clean up the path\n      filePath = filePath.replace(/^(file:|path:)/i, '').trim();\n      logger.info(`üìù Cleaned filename: \"${filePath}\"`);\n      \n      // If it's just a filename, try to find it in various locations\n      if (!filePath.includes('/') && !filePath.includes('\\\\')) {\n        const possibleDataDirs = [\n          path.join(process.cwd(), 'data', 'examples'),\n          path.join(__dirname, '..', '..', 'data', 'examples'),\n          path.join(__dirname, '..', '..', '..', 'data', 'examples'),\n          path.join(process.cwd(), 'plugins', 'my-compchem-plugin-v2', 'data', 'examples'),\n          './data/examples'\n        ];\n\n        for (const dataDir of possibleDataDirs) {\n          const fullPath = path.join(dataDir, filePath);\n          try {\n            fs.accessSync(fullPath, fs.constants.F_OK);\n            logger.info(`‚úÖ Found file: ${fullPath}`);\n            return fullPath;\n          } catch {\n            logger.debug(`‚ùå Not found: ${fullPath}`);\n          }\n        }\n        \n        // If not found, return the default path\n        const defaultPath = path.join(process.cwd(), 'data', 'examples', filePath);\n        logger.info(`üîÑ Returning default path: ${defaultPath}`);\n        return defaultPath;\n      }\n      \n      return filePath;\n    }\n  }\n\n  logger.info('‚ùå No file path patterns matched');\n  return null;\n}\n\n/**\n * Find an example log file to use for demonstration\n */\nfunction findExampleLogFile(): string | null {\n  // Try multiple possible locations for the data files\n  const possibleDataDirs = [\n    // Current working directory\n    path.join(process.cwd(), 'data', 'examples'),\n    // Plugin directory (if running from plugin root)\n    path.join(__dirname, '..', '..', 'data', 'examples'),\n    // Relative to dist directory (if running from built plugin)\n    path.join(__dirname, '..', '..', '..', 'data', 'examples'),\n    // ElizaOS plugin directory structure\n    path.join(process.cwd(), 'plugins', 'my-compchem-plugin-v2', 'data', 'examples'),\n    // Direct relative path\n    './data/examples'\n  ];\n\n  const exampleFiles = ['lactone.log', 'TolueneEnergy.log'];\n\n  // Try each directory with each file\n  for (const dataDir of possibleDataDirs) {\n    for (const filename of exampleFiles) {\n      const filePath = path.join(dataDir, filename);\n      try {\n        // Use proper ES modules fs import\n        fs.accessSync(filePath, fs.constants.F_OK);\n        logger.info(`‚úÖ Found example file: ${filePath}`);\n        return filePath;\n      } catch (error) {\n        // File doesn't exist, continue\n        logger.debug(`‚ùå File not found: ${filePath}`);\n      }\n    }\n  }\n\n  logger.warn('‚ùå No example log files found in any location');\n  return null;\n} ","import type {\n  Action,\n  Content,\n  HandlerCallback,\n  IAgentRuntime,\n  Memory,\n  State,\n} from '@elizaos/core';\nimport { logger } from '@elizaos/core';\nimport { PythonService } from '../services/pythonService';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport { fileURLToPath } from 'url';\n\n// ES modules equivalent of __dirname\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n/**\n * Diagnostic action to help debug path and environment issues\n */\nexport const diagnosticsAction: Action = {\n  name: 'COMPCHEM_DIAGNOSTICS',\n  similes: ['DIAGNOSTICS', 'DEBUG_PATHS', 'CHECK_ENVIRONMENT', 'TROUBLESHOOT'],\n  description: 'Runs diagnostic checks for the computational chemistry plugin to help debug path and environment issues',\n\n  validate: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined\n  ): Promise<boolean> => {\n    const text = message.content.text?.toLowerCase() || '';\n    \n    const diagnosticKeywords = [\n      'diagnostic', 'debug', 'troubleshoot', 'check environment',\n      'path issues', 'file not found', 'python not working'\n    ];\n    \n    return diagnosticKeywords.some(keyword => text.includes(keyword));\n  },\n\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined,\n    _options: any,\n    callback?: HandlerCallback,\n    _responses?: Memory[]\n  ) => {\n    try {\n      logger.info('üîç Running computational chemistry diagnostics...');\n\n      let responseText = 'üîç **Computational Chemistry Plugin Diagnostics**\\n\\n';\n\n      // 1. Current working directory\n      const currentDir = process.cwd();\n      responseText += `üìÅ **Current Working Directory:**\\n\\`${currentDir}\\`\\n\\n`;\n\n      // 2. Check for data files\n      responseText += 'üìä **Data Files Check:**\\n';\n      const possibleDataDirs = [\n        path.join(currentDir, 'data', 'examples'),\n        path.join(__dirname, '..', '..', 'data', 'examples'),\n        path.join(__dirname, '..', '..', '..', 'data', 'examples'),\n        path.join(currentDir, 'plugins', 'my-compchem-plugin-v2', 'data', 'examples'),\n        './data/examples'\n      ];\n\n      const dataFiles = ['lactone.log', 'TolueneEnergy.log'];\n      let foundDataFiles = false;\n\n      for (const dataDir of possibleDataDirs) {\n        for (const filename of dataFiles) {\n          const filePath = path.join(dataDir, filename);\n          try {\n            fs.accessSync(filePath);\n            responseText += `  ‚úÖ Found: \\`${filePath}\\`\\n`;\n            foundDataFiles = true;\n          } catch {\n            responseText += `  ‚ùå Missing: \\`${filePath}\\`\\n`;\n          }\n        }\n      }\n\n      if (!foundDataFiles) {\n        responseText += '\\n‚ö†Ô∏è  **No data files found!** Please ensure log files are in the data/examples/ directory.\\n';\n      }\n\n      // 3. Check for Python scripts\n      responseText += '\\nüêç **Python Scripts Check:**\\n';\n      const scriptNames = ['parse_gaussian_cclib.py', 'molecular_analyzer.py', 'plot_gaussian_analysis.py'];\n      const possibleScriptDirs = [\n        path.join(currentDir, 'py'),\n        path.join(__dirname, '..', '..', 'py'),\n        path.join(__dirname, '..', '..', '..', 'py'),\n        path.join(currentDir, 'plugins', 'my-compchem-plugin-v2', 'py'),\n        './py'\n      ];\n\n      let foundScripts = false;\n      for (const scriptDir of possibleScriptDirs) {\n        for (const scriptName of scriptNames) {\n          const scriptPath = path.join(scriptDir, scriptName);\n          try {\n            fs.accessSync(scriptPath);\n            responseText += `  ‚úÖ Found: \\`${scriptPath}\\`\\n`;\n            foundScripts = true;\n          } catch {\n            responseText += `  ‚ùå Missing: \\`${scriptPath}\\`\\n`;\n          }\n        }\n      }\n\n      if (!foundScripts) {\n        responseText += '\\n‚ö†Ô∏è  **No Python scripts found!** Please ensure scripts are in the py/ directory.\\n';\n      }\n\n      // 4. Python environment check\n      responseText += '\\nüêç **Python Environment:**\\n';\n      const pythonService = runtime.getService<PythonService>('python-execution');\n      if (pythonService) {\n        try {\n          const pythonEnv = await pythonService.checkPythonEnvironment();\n          if (pythonEnv.pythonAvailable) {\n            responseText += `  ‚úÖ Python: ${pythonEnv.pythonVersion}\\n`;\n            if (pythonEnv.cclibAvailable) {\n              responseText += `  ‚úÖ cclib: Available\\n`;\n            } else {\n              responseText += `  ‚ùå cclib: Missing (install with: pip install cclib)\\n`;\n            }\n            \n            responseText += `  üì¶ **Available packages:** ${pythonEnv.packagesAvailable.join(', ')}\\n`;\n            if (pythonEnv.packagesMissing.length > 0) {\n              responseText += `  üì¶ **Missing packages:** ${pythonEnv.packagesMissing.join(', ')}\\n`;\n            }\n          } else {\n            responseText += `  ‚ùå Python: Not available\\n`;\n          }\n        } catch (error) {\n          responseText += `  ‚ùå Python check failed: ${error instanceof Error ? error.message : 'Unknown error'}\\n`;\n        }\n      } else {\n        responseText += `  ‚ùå PythonService: Not available\\n`;\n      }\n\n      // 5. Runtime settings\n      responseText += '\\n‚öôÔ∏è  **Runtime Settings:**\\n';\n      const pythonPath = runtime.getSetting('PYTHON_PATH');\n      const pythonDebug = runtime.getSetting('PYTHON_DEBUG');\n      const dataDir = runtime.getSetting('COMPCHEM_DATA_DIR');\n\n      responseText += `  ‚Ä¢ PYTHON_PATH: ${pythonPath || 'Not set (default: python3)'}\\n`;\n      responseText += `  ‚Ä¢ PYTHON_DEBUG: ${pythonDebug || 'Not set (default: false)'}\\n`;\n      responseText += `  ‚Ä¢ COMPCHEM_DATA_DIR: ${dataDir || 'Not set (default: ./data)'}\\n`;\n\n      // 6. Plugin info\n      responseText += '\\nüîå **Plugin Info:**\\n';\n      responseText += `  ‚Ä¢ __dirname: \\`${__dirname}\\`\\n`;\n      responseText += `  ‚Ä¢ Plugin Name: my-compchem-plugin-v2\\n`;\n      responseText += `  ‚Ä¢ Services: PythonService, CompchemService\\n`;\n      responseText += `  ‚Ä¢ Actions: PARSE_GAUSSIAN_FILE, ANALYZE_MOLECULAR_DATA, GENERATE_MOLECULAR_VISUALIZATION\\n`;\n\n      // 7. Recommendations\n      responseText += '\\nüí° **Recommendations:**\\n';\n      if (!foundDataFiles) {\n        responseText += `  ‚Ä¢ Copy log files to: \\`${path.join(currentDir, 'data', 'examples')}\\`\\n`;\n      }\n      if (!foundScripts) {\n        responseText += `  ‚Ä¢ Copy Python scripts to: \\`${path.join(currentDir, 'py')}\\`\\n`;\n      }\n      responseText += `  ‚Ä¢ Try: \"Parse the lactone.log file\"\\n`;\n      responseText += `  ‚Ä¢ Try: \"Analyze molecule C6H6\"\\n`;\n\n      const responseContent: Content = {\n        text: responseText,\n        actions: ['COMPCHEM_DIAGNOSTICS'],\n        source: message.content.source,\n      };\n\n      if (callback) await callback(responseContent);\n      return responseContent;\n\n    } catch (error) {\n      logger.error('Error in diagnostics:', error);\n      \n      const errorContent: Content = {\n        text: `‚ùå Diagnostics failed: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        actions: ['COMPCHEM_DIAGNOSTICS'],\n        source: message.content.source,\n      };\n      \n      if (callback) await callback(errorContent);\n      return errorContent;\n    }\n  },\n\n  examples: [\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Run diagnostics to check if everything is working',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üîç **Computational Chemistry Plugin Diagnostics**\\n\\nüìÅ **Current Working Directory:** `/path/to/workspace`\\n\\nüìä **Data Files Check:**\\n  ‚úÖ Found: `/path/to/data/examples/lactone.log`\\n  ‚úÖ Found: `/path/to/data/examples/TolueneEnergy.log`\\n\\nüêç **Python Environment:**\\n  ‚úÖ Python: Python 3.9.0\\n  ‚úÖ cclib: Available\\n\\nüí° All systems operational!',\n          actions: ['COMPCHEM_DIAGNOSTICS'],\n        },\n      },\n    ],\n  ],\n}; ","import {\n  type Action,\n  type Content,\n  type HandlerCallback,\n  type IAgentRuntime,\n  type Memory,\n  type State,\n  logger,\n} from '@elizaos/core';\nimport { AutoKnowledgeService } from '../services/autoKnowledgeService';\n\nexport const autoKnowledgeAction: Action = {\n  name: 'AUTO_KNOWLEDGE_STATS',\n  similes: [\n    'KNOWLEDGE_STATS',\n    'AUTO_STATS',\n    'SHOW_KNOWLEDGE',\n    'KNOWLEDGE_BASE',\n    'HOW_MANY_MOLECULES',\n    'GET_ENERGIES',\n    'SHOW_ENERGIES',\n    'SCF_ENERGIES',\n    'ENERGY_VALUES'\n  ],\n  description: 'Show statistics and detailed data from the automatic knowledge graph including actual energy values',\n\n  validate: async (\n    _runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined\n  ): Promise<boolean> => {\n    const text = message.content.text?.toLowerCase() || '';\n    \n    const keywords = [\n      'knowledge', 'stats', 'statistics', 'how many', 'molecules',\n      'auto', 'automatic', 'processed', 'files', 'knowledge base',\n      'energies', 'energy', 'scf', 'get energies', 'show energies'\n    ];\n    \n    return keywords.some(keyword => text.includes(keyword));\n  },\n\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined,\n    _options: any,\n    callback?: HandlerCallback,\n    _responses?: Memory[]\n  ) => {\n    try {\n      logger.info('Handling AUTO_KNOWLEDGE_STATS action');\n\n      const autoService = runtime.getService<AutoKnowledgeService>('auto-knowledge');\n      \n      if (!autoService) {\n        const errorContent: Content = {\n          text: '‚ùå Auto knowledge service is not running. The service automatically monitors data/examples/ for Gaussian files.',\n          actions: ['AUTO_KNOWLEDGE_STATS'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      const userQuery = message.content.text?.toLowerCase() || '';\n      const isEnergyQuery = userQuery.includes('energy') || userQuery.includes('energies') || userQuery.includes('scf');\n      \n      let responseText: string;\n      \n      if (isEnergyQuery) {\n        // User wants specific energy values\n        const energyData = await autoService.getEnergies();\n        \n        if (energyData.error) {\n          const errorContent: Content = {\n            text: `‚ùå Error getting energy data: ${energyData.error}`,\n            actions: ['AUTO_KNOWLEDGE_STATS'],\n            source: message.content.source,\n          };\n          \n          if (callback) await callback(errorContent);\n          return errorContent;\n        }\n\n        responseText = `‚ö° **SCF Energies from Knowledge Graph**\\n\\n`;\n        \n        if (energyData.totalEnergies === 0) {\n          responseText += `‚ùå No energy data found in the knowledge graph.\\n\\n`;\n          responseText += `üí° **To get energy data:** Copy Gaussian .log files to \\`data/examples/\\` and they'll be automatically processed!`;\n        } else {\n          responseText += `**üìä Total Files:** ${energyData.totalFiles} | **Total Energies:** ${energyData.totalEnergies}\\n\\n`;\n          \n          for (const [filename, energies] of Object.entries(energyData.energiesByFile)) {\n            responseText += `**üìÑ ${filename}:**\\n`;\n            \n            if (Array.isArray(energies) && energies.length > 0) {\n              energies.forEach((energy: any, index: number) => {\n                responseText += `  ${index + 1}. **${energy.hartree.toFixed(8)} hartree** (${energy.eV.toFixed(6)} eV)\\n`;\n              });\n            } else {\n              responseText += `  ‚ö†Ô∏è  No energies found\\n`;\n            }\n            responseText += '\\n';\n          }\n          \n          responseText += `üí° **Units:** Hartree is the atomic unit of energy. 1 hartree = 27.211 eV`;\n        }\n      } else {\n        // User wants general statistics\n        const stats = await autoService.getStats();\n        \n        if (stats.error) {\n          const errorContent: Content = {\n            text: `‚ùå Error getting knowledge stats: ${stats.error}`,\n            actions: ['AUTO_KNOWLEDGE_STATS'],\n            source: message.content.source,\n          };\n          \n          if (callback) await callback(errorContent);\n          return errorContent;\n        }\n\n        responseText = `üß† **Automatic Knowledge Graph Status**\n\n**üìÅ Monitoring:** \\`${stats.watchedDirectory}\\`\n**üìä Knowledge Graph:** \\`${stats.knowledgeGraphPath}\\`\n\n**üìà Current Statistics:**\n‚Ä¢ **Files Processed:** ${stats.totalFiles}\n‚Ä¢ **Molecules:** ${stats.molecules}\n‚Ä¢ **SCF Energies:** ${stats.scfEnergies}  \n‚Ä¢ **Atoms:** ${stats.atoms}\n‚Ä¢ **Last Update:** ${new Date(stats.lastUpdate).toLocaleString()}\n\n${stats.totalFiles > 0 ? \n  `**üìÑ Processed Files:**\\n${stats.filesList.map((file: string) => `‚Ä¢ ${file}`).join('\\n')}` : \n  '**üìÑ No files processed yet**'\n}\n\nüí° **How it works:** Just copy \\`.log\\` or \\`.out\\` files to \\`data/examples/\\` and they'll be automatically processed into the knowledge graph!\n\n${stats.totalFiles === 0 ? \n  '\\nüöÄ **Get started:** Copy some Gaussian log files to `data/examples/` to see the knowledge graph grow automatically!' : \n  '\\nüîç **Energy tip:** Ask me to \"get energies\" or \"show SCF energies\" to see actual energy values!'\n}`;\n      }\n\n      const responseContent: Content = {\n        text: responseText,\n        actions: ['AUTO_KNOWLEDGE_STATS'],\n        source: message.content.source,\n      };\n\n      if (callback) await callback(responseContent);\n      return responseContent;\n\n    } catch (error) {\n      logger.error('Error in AUTO_KNOWLEDGE_STATS action:', error);\n      \n      const errorContent: Content = {\n        text: `‚ùå Failed to get knowledge stats: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        actions: ['AUTO_KNOWLEDGE_STATS'],\n        source: message.content.source,\n      };\n      \n      if (callback) await callback(errorContent);\n      return errorContent;\n    }\n  },\n\n  examples: [\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Show me knowledge graph statistics',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üß† **Automatic Knowledge Graph Status**\\n\\n**üìÅ Monitoring:** `data/examples/`\\n**üìä Knowledge Graph:** `data/auto-knowledge-graph.ttl`\\n\\n**üìà Current Statistics:**\\n‚Ä¢ **Files Processed:** 2\\n‚Ä¢ **Molecules:** 2\\n‚Ä¢ **SCF Energies:** 2\\n‚Ä¢ **Atoms:** 30\\n‚Ä¢ **Last Update:** 1/15/2024, 10:30:00 AM\\n\\n**üìÑ Processed Files:**\\n‚Ä¢ lactone.log\\n‚Ä¢ TolueneEnergy.log\\n\\nüí° **How it works:** Just copy `.log` or `.out` files to `data/examples/` and they\\'ll be automatically processed into the knowledge graph!',\n          actions: ['AUTO_KNOWLEDGE_STATS'],\n        },\n      },\n    ],\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Get energies',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: '‚ö° **SCF Energies from Knowledge Graph**\\n\\n**üìä Total Files:** 2 | **Total Energies:** 2\\n\\n**üìÑ TolueneEnergy.log:**\\n  1. **-271.63604200 hartree** (-7384.636042 eV)\\n\\n**üìÑ lactone.log:**\\n  1. **-227.85626900 hartree** (-6202.856269 eV)\\n\\nüí° **Units:** Hartree is the atomic unit of energy. 1 hartree = 27.211 eV',\n          actions: ['AUTO_KNOWLEDGE_STATS'],\n        },\n      },\n    ],\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'How many molecules do we have?',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üß† **Automatic Knowledge Graph Status**\\n\\n**üìà Current Statistics:**\\n‚Ä¢ **Files Processed:** 3\\n‚Ä¢ **Molecules:** 3\\n‚Ä¢ **SCF Energies:** 3\\n‚Ä¢ **Atoms:** 45\\n\\n**üìÑ Processed Files:**\\n‚Ä¢ lactone.log\\n‚Ä¢ TolueneEnergy.log\\n‚Ä¢ example.log\\n\\nüîç **Energy tip:** Ask me to \"get energies\" or \"show SCF energies\" to see actual energy values!',\n          actions: ['AUTO_KNOWLEDGE_STATS'],\n        },\n      },\n    ],\n  ],\n}; ","import {\n  type Action,\n  type Content,\n  type HandlerCallback,\n  type IAgentRuntime,\n  type Memory,\n  type State,\n  logger,\n} from '@elizaos/core';\nimport { PythonService } from '../services/pythonService';\nimport { AutoKnowledgeService } from '../services/autoKnowledgeService';\nimport { imageService } from '../services/imageServingService';\nimport { promises as fs } from 'fs';\nimport * as path from 'path';\n\nexport const generateVisualizationAction: Action = {\n  name: 'GENERATE_VISUALIZATION',\n  similes: [\n    'GENERATE_CHARTS',\n    'CREATE_PLOTS',\n    'VISUALIZE_DATA',\n    'PLOT_ANALYSIS',\n    'SHOW_CHARTS',\n    'CREATE_VISUALIZATIONS',\n    'MAKE_PLOTS'\n  ],\n  description: 'Generate professional-quality visualizations and charts from the knowledge graph using Python matplotlib',\n\n  validate: async (\n    _runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined\n  ): Promise<boolean> => {\n    const text = message.content.text?.toLowerCase() || '';\n    \n    const keywords = [\n      'visualization', 'chart', 'plot', 'graph', 'visualize', 'charts',\n      'generate visualization', 'create chart', 'show plot', 'make graph',\n      'energy chart', 'frequency plot', 'molecular visualization'\n    ];\n    \n    return keywords.some(keyword => text.includes(keyword));\n  },\n\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined,\n    _options: any,\n    callback?: HandlerCallback,\n    _responses?: Memory[]\n  ) => {\n    try {\n      logger.info('Generating visualization from knowledge graph data');\n\n      // Get services\n      const autoService = runtime.getService<AutoKnowledgeService>('auto-knowledge');\n      const pythonService = runtime.getService<PythonService>('python-execution');\n\n      if (!autoService) {\n        const errorContent: Content = {\n          text: '‚ùå Auto knowledge service not available. Please ensure the service is running.',\n          actions: ['GENERATE_VISUALIZATION'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      if (!pythonService) {\n        const errorContent: Content = {\n          text: '‚ùå Python service not available. Charts require Python with matplotlib.',\n          actions: ['GENERATE_VISUALIZATION'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      // Get knowledge graph statistics and data\n      const stats = await autoService.getStats();\n      const energyData = await autoService.getEnergies();\n      const molecularData = await autoService.getMolecularData();\n\n      if (stats.error) {\n        const errorContent: Content = {\n          text: `‚ùå Error getting knowledge graph data: ${stats.error}`,\n          actions: ['GENERATE_VISUALIZATION'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      if (stats.totalFiles === 0) {\n        const errorContent: Content = {\n          text: 'üìä No data available for visualization. Please add some Gaussian files to `data/examples/` first.',\n          actions: ['GENERATE_VISUALIZATION'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      // Determine what type of chart to generate from user message\n      const userQuery = message.content.text?.toLowerCase() || '';\n      const chartType = detectChartType(userQuery);\n\n      // Prepare data for Python plotting\n      const plotData = prepareDataForPlotting(energyData, molecularData, stats);\n      \n      // Generate timestamp for unique file naming\n      const timestamp = Date.now();\n      \n      // Create charts directory\n      const chartsDir = path.join(process.cwd(), 'data', 'charts', `visualization-${timestamp}`);\n      await fs.mkdir(chartsDir, { recursive: true });\n\n      let generatedCharts: string[] = [];\n      let responseText = '';\n\n      try {\n        // Generate the requested visualization using PythonService\n        const chartResult = await pythonService.generateVisualization(chartType, plotData, chartsDir);\n        \n        if (chartResult.success && chartResult.chartPath) {\n          generatedCharts.push(chartResult.chartPath);\n          const mainChartPath = chartResult.chartPath;\n          \n          // Keep response text minimal to avoid model context bloat\n          responseText = `üìä **${getChartTypeDisplayName(chartType)} Generated**\n\nüìà **Data:** ${chartResult.dataPoints || 'N/A'} points from ${stats.totalFiles} files\nüåê **URL:** http://localhost:3000/charts/visualization-${timestamp}/${path.basename(chartResult.chartPath)}\n\n‚úÖ Chart ready for viewing!`;\n\n        } else {\n          // Keep error response minimal too\n          responseText = `‚ùå **Chart Generation Failed**\n\n**Error:** ${chartResult.error || 'Unknown error'}\n\nüîß Check Python/matplotlib installation`;\n        }\n        \n      } catch (error) {\n        logger.error('Error generating visualization:', error);\n        // Keep error minimal to avoid context bloat\n        responseText = `‚ùå **Chart Error:** ${error.message}`;\n      }\n\n      // IMPORTANT: Keep image data separate from model context to avoid token limit issues\n      const responseContent: Content = {\n        text: responseText,\n        actions: ['GENERATE_VISUALIZATION'],\n        source: message.content.source,\n        attachments: [], // Add attachments array - this is for CLIENT DISPLAY ONLY\n      };\n\n      // Add chart attachments with proper async handling\n      // NOTE: These attachments are for UI display and should NOT be sent to the model\n      if (generatedCharts.length > 0) {\n        // Process all charts with static URLs ONLY (no base64 to avoid context pollution)\n        const attachmentPromises = generatedCharts.map(async (chartPath: string, index: number) => {\n          const filename = path.basename(chartPath);\n          const relativePath = path.relative(process.cwd(), chartPath);\n          \n          // Force static URL serving to keep out of model context\n          const serverUrl = process.env.SERVER_URL || 'http://localhost:3000';\n          const staticUrl = `${serverUrl}/charts/visualization-${timestamp}/${filename}`;\n          \n          logger.info(`Serving chart as static URL (keeping out of model context): ${filename}`);\n          \n          return {\n            id: (Date.now() + index).toString(),\n            url: staticUrl, // Static URL only - never base64\n            title: `${getChartTypeDisplayName(chartType)} Chart`,\n            source: \"visualization-charts\", \n            description: `Chart: ${filename}`, // Keep description short\n            text: relativePath, // Minimal text to avoid bloating context\n          };\n        });\n        \n        // Wait for all attachments to be processed\n        const attachments = await Promise.all(attachmentPromises);\n        responseContent.attachments?.push(...attachments);\n        \n        // Keep instructions minimal to avoid context bloat\n        responseText += `\\n\\nüìÅ **Local:** \\`${path.relative(process.cwd(), chartsDir)}\\``;\n      }\n\n      if (callback) await callback(responseContent);\n      return responseContent;\n\n    } catch (error) {\n      logger.error('Error in GENERATE_VISUALIZATION action:', error);\n      \n      // Keep error minimal to avoid context bloat\n      const errorContent: Content = {\n        text: `‚ùå Error: ${error.message}`,\n        actions: ['GENERATE_VISUALIZATION'],\n        source: message.content.source,\n      };\n      \n      if (callback) await callback(errorContent);\n      return errorContent;\n    }\n  },\n\n  examples: [\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Generate a visualization of the data',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üìä **Visualization Generated Successfully**\\n\\nüé® **Chart Type:** Overview Statistics\\nüìÅ **Location:** `data/charts/visualization-1234567890/overview.png`\\nüìà **Data Points:** 45\\nüß™ **Files Analyzed:** 2\\n\\n**üí° Chart Features:**\\n‚Ä¢ High-resolution PNG format (300 DPI)\\n‚Ä¢ Publication-ready styling\\n‚Ä¢ Color-coded data separation',\n          actions: ['GENERATE_VISUALIZATION'],\n        },\n      },\n    ],\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Create energy plots',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üìä **Energy Visualization Generated**\\n\\nüé® **Chart Type:** SCF Energy Trends\\nüìà **Data Points:** 12 energies across 2 files\\nüìÅ **Location:** `data/charts/visualization-1234567890/energy.png`\\n\\n**üîç Analysis Shows:**\\n‚Ä¢ Energy convergence patterns\\n‚Ä¢ File-by-file comparison\\n‚Ä¢ Statistical annotations',\n          actions: ['GENERATE_VISUALIZATION'],\n        },\n      },\n    ],\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Show me charts of the molecular data',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üìä **Molecular Visualization Created**\\n\\nüé® **Chart Type:** Molecular Properties\\nüß™ **Files Analyzed:** 2\\nüìà **Properties:** Atoms, formulas, charges\\nüìÅ **Location:** `data/charts/visualization-1234567890/molecular.png`\\n\\n**üí° Perfect for:** Research presentations and data analysis',\n          actions: ['GENERATE_VISUALIZATION'],\n        },\n      },\n    ],\n  ],\n};\n\nfunction detectChartType(userQuery: string): string {\n  if (userQuery.includes('energy') || userQuery.includes('scf')) {\n    return 'energy';\n  } else if (userQuery.includes('molecular') || userQuery.includes('molecule')) {\n    return 'molecular';\n  } else if (userQuery.includes('frequency') || userQuery.includes('vibrational')) {\n    return 'frequency';\n  } else if (userQuery.includes('overview') || userQuery.includes('summary') || userQuery.includes('statistics')) {\n    return 'overview';\n  } else {\n    // Default to overview for general visualization requests\n    return 'overview';\n  }\n}\n\nfunction getChartTypeDisplayName(chartType: string): string {\n  const names = {\n    'overview': 'Overview Statistics',\n    'energy': 'SCF Energy Trends',\n    'molecular': 'Molecular Properties',\n    'frequency': 'Vibrational Analysis'\n  };\n  return names[chartType] || 'Custom Visualization';\n}\n\nfunction prepareDataForPlotting(energyData: any, molecularData: any, stats: any): any {\n  return {\n    stats: {\n      molecules: stats.molecules || 0,\n      scfEnergies: stats.scfEnergies || 0,\n      frequencies: stats.frequencies || 0,\n      atoms: stats.atoms || 0,\n      totalFiles: stats.totalFiles || 0,\n      enhanced: false // V2 uses basic parsing\n    },\n    energyData: energyData.energiesByFile || {},\n    molecularData: molecularData.moleculesByFile || {},\n    fileData: combineFileData(energyData.energiesByFile || {}, molecularData.moleculesByFile || {})\n  };\n}\n\nfunction combineFileData(energies: any, molecules: any): any {\n  const combined: any = {};\n  \n  // Combine energy and molecular data by file\n  for (const [filename, energyList] of Object.entries(energies)) {\n    combined[filename] = {\n      energyData: Array.isArray(energyList) ? energyList.map((e: any) => e.hartree) : [],\n      molecularData: molecules[filename] || {},\n      homoLumoData: [], // Not available in V2 basic parsing\n      frequencyData: [] // Not available in V2 basic parsing\n    };\n  }\n  \n  return combined;\n} ","import {\n  type Action,\n  type Content,\n  type HandlerCallback,\n  type IAgentRuntime,\n  type Memory,\n  type State,\n  logger,\n} from '@elizaos/core';\nimport { PythonService } from '../services/pythonService';\nimport { AutoKnowledgeService } from '../services/autoKnowledgeService';\nimport { imageService } from '../services/imageServingService';\nimport { promises as fs } from 'fs';\nimport * as path from 'path';\n\nexport const generateReportAction: Action = {\n  name: 'GENERATE_COMPREHENSIVE_REPORT',\n  similes: [\n    'GENERATE_REPORT',\n    'CREATE_REPORT',\n    'COMPREHENSIVE_ANALYSIS',\n    'FULL_REPORT',\n    'ANALYSIS_REPORT',\n    'COMPLETE_ANALYSIS',\n    'DETAILED_REPORT',\n    'SUMMARY_REPORT'\n  ],\n  description: 'Generate a comprehensive analysis report with multiple visualizations, statistics, and detailed analysis from the knowledge graph data',\n\n  validate: async (\n    _runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined\n  ): Promise<boolean> => {\n    const text = message.content.text?.toLowerCase() || '';\n    \n    const keywords = [\n      'comprehensive report', 'full report', 'complete report', 'analysis report',\n      'detailed report', 'summary report', 'generate report', 'create report',\n      'comprehensive analysis', 'complete analysis', 'full analysis',\n      'report', 'summary', 'overview', 'comprehensive'\n    ];\n    \n    return keywords.some(keyword => text.includes(keyword));\n  },\n\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    _state: State | undefined,\n    _options: any,\n    callback?: HandlerCallback,\n    _responses?: Memory[]\n  ) => {\n    try {\n      logger.info('Generating comprehensive analysis report');\n\n      // Get services\n      const autoService = runtime.getService<AutoKnowledgeService>('auto-knowledge');\n      const pythonService = runtime.getService<PythonService>('python-execution');\n\n      if (!autoService) {\n        const errorContent: Content = {\n          text: '‚ùå Auto knowledge service not available. Please ensure the service is running.',\n          actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      if (!pythonService) {\n        const errorContent: Content = {\n          text: '‚ùå Python service not available. Comprehensive reports require Python with matplotlib.',\n          actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      // Get comprehensive knowledge graph data\n      const stats = await autoService.getStats();\n      const energyData = await autoService.getEnergies();\n      const molecularData = await autoService.getMolecularData();\n\n      if (stats.error) {\n        const errorContent: Content = {\n          text: `‚ùå Error getting knowledge graph data: ${stats.error}`,\n          actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      if (stats.totalFiles === 0) {\n        const errorContent: Content = {\n          text: 'üìä No data available for report generation. Please add some Gaussian files to `data/examples/` first.',\n          actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n          source: message.content.source,\n        };\n        \n        if (callback) await callback(errorContent);\n        return errorContent;\n      }\n\n      // Prepare comprehensive data for Python script\n      const reportData = prepareReportData(energyData, molecularData, stats);\n      \n      // Generate timestamp for unique file naming\n      const timestamp = Date.now();\n      \n      // Create reports directory\n      const reportsDir = path.join(process.cwd(), 'data', 'reports', `comprehensive-${timestamp}`);\n      await fs.mkdir(reportsDir, { recursive: true });\n\n      let responseText = '';\n      let reportFiles: string[] = [];\n\n      try {\n        // Generate comprehensive report using PythonService\n        const reportResult = await pythonService.generateComprehensiveReport(reportData, reportsDir);\n        \n        if (reportResult.success) {\n          reportFiles = [\n            reportResult.dashboard_path,\n            ...reportResult.analysis_paths\n          ].filter(Boolean);\n          \n          const serverUrl = process.env.SERVER_URL || 'http://localhost:3000';\n          const dashboardFilename = path.basename(reportResult.dashboard_path);\n          \n          responseText = `üìä **Comprehensive Analysis Report Generated**\n\nüéØ **Dashboard:** http://localhost:3000/reports/comprehensive-${timestamp}/${dashboardFilename}\nüìà **Analysis Files:** ${reportResult.total_files} detailed reports\nüß™ **Data Sources:** ${stats.totalFiles} Gaussian files\n‚è∞ **Generated:** ${reportResult.timestamp}\n\n## üìã Report Contents\n‚úÖ **Main Dashboard** - Overview with key statistics\n‚úÖ **Energy Analysis** - Detailed SCF energy trends\n‚úÖ **Molecular Analysis** - Molecular properties and formulas\n‚úÖ **File Comparison** - Cross-file analysis and completeness\n\n## üîç Key Findings\n${generateKeyFindings(stats, energyData, molecularData)}\n\nüìÅ **Local Path:** \\`${path.relative(process.cwd(), reportsDir)}\\``;\n\n        } else {\n          responseText = `‚ùå **Report Generation Failed**\n\n**Error:** ${reportResult.error || 'Unknown error'}\n\nüîß Check Python/matplotlib installation and data availability`;\n        }\n        \n      } catch (error) {\n        logger.error('Error generating comprehensive report:', error);\n        responseText = `‚ùå **Report Error:** ${error.message}`;\n      }\n\n      // Keep response focused and avoid model context bloat\n      const responseContent: Content = {\n        text: responseText,\n        actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n        source: message.content.source,\n        attachments: [],\n      };\n\n      // Add report attachments with static URLs (avoid base64 for context efficiency)\n      if (reportFiles.length > 0) {\n        const attachmentPromises = reportFiles.map(async (reportPath: string, index: number) => {\n          const filename = path.basename(reportPath);\n          const relativePath = path.relative(process.cwd(), reportPath);\n          \n          const serverUrl = process.env.SERVER_URL || 'http://localhost:3000';\n          const staticUrl = `${serverUrl}/reports/comprehensive-${timestamp}/${filename}`;\n          \n          logger.info(`Serving report as static URL: ${filename}`);\n          \n          return {\n            id: (Date.now() + index).toString(),\n            url: staticUrl,\n            title: getReportTitle(filename),\n            source: \"comprehensive-report\", \n            description: `Report: ${filename}`,\n            text: relativePath,\n          };\n        });\n        \n        const attachments = await Promise.all(attachmentPromises);\n        responseContent.attachments?.push(...attachments);\n      }\n\n      if (callback) await callback(responseContent);\n      return responseContent;\n\n    } catch (error) {\n      logger.error('Error in GENERATE_COMPREHENSIVE_REPORT action:', error);\n      \n      const errorContent: Content = {\n        text: `‚ùå **Comprehensive Report Error:** ${error.message}`,\n        actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n        source: message.content.source,\n      };\n      \n      if (callback) await callback(errorContent);\n      return errorContent;\n    }\n  },\n\n  examples: [\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Generate a comprehensive report',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üìä **Comprehensive Analysis Report Generated**\\n\\nüéØ **Dashboard:** Available with overview statistics\\nüìà **Analysis Files:** 4 detailed reports created\\nüß™ **Data Sources:** 2 Gaussian files analyzed\\n\\n## üìã Report Contents\\n‚úÖ **Main Dashboard** - Overview with key statistics\\n‚úÖ **Energy Analysis** - Detailed SCF energy trends\\n‚úÖ **Molecular Analysis** - Molecular properties\\n‚úÖ **File Comparison** - Cross-file analysis\\n\\n## üîç Key Findings\\n‚Ä¢ 2 molecules analyzed with 15 SCF energies\\n‚Ä¢ Energy range: -154.123 to -98.456 Hartree\\n‚Ä¢ Molecular formulas: C7H6O2, C7H8\\n‚Ä¢ Atom counts: 15-15 atoms per molecule\\n\\nüìÅ **Local Path:** `data/reports/comprehensive-1234567890`',\n          actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n        },\n      },\n    ],\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'Create a full analysis report of all the data',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üìä **Comprehensive Analysis Report Generated**\\n\\nüéØ **Dashboard:** Complete overview with visualizations\\nüìà **Analysis Files:** 3 detailed reports\\nüß™ **Data Sources:** 1 Gaussian file\\n\\n## üìã Report Contents\\n‚úÖ **Main Dashboard** - Statistical overview\\n‚úÖ **Energy Analysis** - SCF convergence analysis\\n‚úÖ **Molecular Analysis** - Structural properties\\n\\n## üîç Key Findings\\n‚Ä¢ Single molecule: C7H6O2 (lactone)\\n‚Ä¢ 8 SCF energy calculations\\n‚Ä¢ 15 atoms total\\n‚Ä¢ Energy convergence achieved\\n\\nPerfect for research documentation and analysis review!',\n          actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n        },\n      },\n    ],\n    [\n      {\n        name: '{{user1}}',\n        content: {\n          text: 'I need a detailed summary report with charts',\n        },\n      },\n      {\n        name: '{{user2}}',\n        content: {\n          text: 'üìä **Comprehensive Analysis Report Generated**\\n\\nüéØ **Dashboard:** Multi-panel overview with charts\\nüìà **Analysis Files:** 4 detailed visualizations\\nüß™ **Data Sources:** 2 Gaussian files analyzed\\n\\n## üìã Report Contents\\n‚úÖ **Main Dashboard** - 6-panel overview\\n‚úÖ **Energy Analysis** - Distribution and trends\\n‚úÖ **Molecular Analysis** - Properties and statistics\\n‚úÖ **File Comparison** - Comparative analysis\\n\\n## üîç Key Findings\\n‚Ä¢ Multiple molecular systems compared\\n‚Ä¢ Energy statistics and distributions\\n‚Ä¢ Molecular diversity analysis\\n‚Ä¢ Data completeness assessment\\n\\nüìä **Professional quality** - Publication ready charts!',\n          actions: ['GENERATE_COMPREHENSIVE_REPORT'],\n        },\n      },\n    ],\n  ],\n};\n\nfunction prepareReportData(energyData: any, molecularData: any, stats: any): any {\n  return {\n    stats: {\n      molecules: stats.molecules || 0,\n      scfEnergies: stats.scfEnergies || 0,\n      frequencies: stats.frequencies || 0,\n      atoms: stats.atoms || 0,\n      totalFiles: stats.totalFiles || 0,\n      enhanced: false // V2 uses basic parsing\n    },\n    energyData: energyData.energiesByFile || {},\n    molecularData: molecularData.moleculesByFile || {},\n    fileData: combineFileDataForReport(energyData.energiesByFile || {}, molecularData.moleculesByFile || {})\n  };\n}\n\nfunction combineFileDataForReport(energies: any, molecules: any): any {\n  const combined: any = {};\n  \n  // Get all unique files from both energy and molecular data\n  const allFiles = new Set([...Object.keys(energies), ...Object.keys(molecules)]);\n  \n  for (const filename of allFiles) {\n    const energyList = energies[filename] || [];\n    const molecularProps = molecules[filename] || {};\n    \n    combined[filename] = {\n      energyData: Array.isArray(energyList) ? energyList.map((e: any) => \n        typeof e === 'object' && e.hartree ? e.hartree : e\n      ) : [],\n      molecularData: molecularProps,\n      homoLumoData: [], // Not available in V2 basic parsing\n      frequencyData: [] // Not available in V2 basic parsing\n    };\n  }\n  \n  return combined;\n}\n\nfunction generateKeyFindings(stats: any, energyData: any, molecularData: any): string {\n  const findings = [];\n  \n  // Basic statistics\n  findings.push(`‚Ä¢ ${stats.molecules || 0} molecules analyzed with ${stats.scfEnergies || 0} SCF energies`);\n  \n  // Energy analysis\n  if (energyData.energiesByFile) {\n    const allEnergies: number[] = [];\n    Object.values(energyData.energiesByFile).forEach((energies: any) => {\n      if (Array.isArray(energies)) {\n        energies.forEach((e: any) => {\n          const energy = typeof e === 'object' && e.hartree ? e.hartree : e;\n          if (typeof energy === 'number') allEnergies.push(energy);\n        });\n      }\n    });\n    \n    if (allEnergies.length > 0) {\n      const minE = Math.min(...allEnergies);\n      const maxE = Math.max(...allEnergies);\n      findings.push(`‚Ä¢ Energy range: ${minE.toFixed(3)} to ${maxE.toFixed(3)} Hartree`);\n    }\n  }\n  \n  // Molecular analysis\n  if (molecularData.moleculesByFile) {\n    const formulas = new Set<string>();\n    const atomCounts: number[] = [];\n    \n    Object.values(molecularData.moleculesByFile).forEach((mol: any) => {\n      if (mol && typeof mol === 'object') {\n        if (mol.formula) formulas.add(mol.formula);\n        if (mol.nAtoms) atomCounts.push(mol.nAtoms);\n      }\n    });\n    \n    if (formulas.size > 0) {\n      const formulaList = Array.from(formulas).slice(0, 3).join(', ');\n      findings.push(`‚Ä¢ Molecular formulas: ${formulaList}${formulas.size > 3 ? '...' : ''}`);\n    }\n    \n    if (atomCounts.length > 0) {\n      const minAtoms = Math.min(...atomCounts);\n      const maxAtoms = Math.max(...atomCounts);\n      findings.push(`‚Ä¢ Atom counts: ${minAtoms}-${maxAtoms} atoms per molecule`);\n    }\n  }\n  \n  return findings.join('\\n');\n}\n\nfunction getReportTitle(filename: string): string {\n  if (filename.includes('dashboard')) {\n    return 'Main Dashboard';\n  } else if (filename.includes('energy')) {\n    return 'Energy Analysis';\n  } else if (filename.includes('molecular')) {\n    return 'Molecular Analysis';\n  } else if (filename.includes('comparison')) {\n    return 'File Comparison';\n  } else {\n    return 'Analysis Report';\n  }\n} ","import { myCompchemPlugin } from './plugin.ts';\n\nexport { myCompchemPlugin, CompchemService } from './plugin.ts';\nexport { AutoKnowledgeService } from './services/autoKnowledgeService';\nexport { autoKnowledgeAction } from './actions/autoKnowledgeAction';\nexport { PythonService } from './services/pythonService';\nexport { analyzeMolecularDataAction } from './actions/analyzeMolecularData';\nexport { generateVisualizationAction } from './actions/generateVisualizationAction';\nexport { generateReportAction } from './actions/generateReportAction';\nexport { parseGaussianFileAction } from './actions/parseGaussianFile';\nexport { diagnosticsAction } from './actions/diagnostics';\nexport default myCompchemPlugin;\n"],"mappings":"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","names":["Service","logger","helloWorldAction","helloWorldProvider","logger","path","fs","fileURLToPath","__filename","fileURLToPath","__dirname","logger","fs","resolve","Service","logger","fs","path","logger","logger","path","fs","fileURLToPath","__filename","__dirname","logger","path","fs","fileURLToPath","__filename","__dirname","dataDir","logger","logger","fs","path","logger","fs","path","logger","Service"]}